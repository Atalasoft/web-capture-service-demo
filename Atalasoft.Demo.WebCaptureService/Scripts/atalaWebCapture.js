!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=n(1),o=n(2),r=n(18),a=n(6),s=n(14),l=n(5),c=n(16),d=n(13);n(3);window.Atalasoft=window.Atalasoft||{},window.Atalasoft.Logger=window.Atalasoft.Logger||l,window.Atalasoft.Controls=window.Atalasoft.Controls||{},window.Atalasoft.Controls.Capture=window.Atalasoft.Controls.Capture||{},window.Atalasoft.Controls.Capture.Errors=a,window.Atalasoft.Controls.Capture.PixelType=s,window.Atalasoft.Controls.Capture.FeederType=d.FeederType,window.Atalasoft.Controls.Capture.ScanMode=d.ScanMode,window.Atalasoft.Controls.Capture.Orientation=d.Orientation,window.Atalasoft.Controls.Capture.PaperSize=d.PaperSize,window.Atalasoft.Controls.Capture.ImprinterTypes=d.ImprinterTypes,window.Atalasoft.Controls.Capture.minVersion=i,window.Atalasoft.Controls.Capture.WebScanning=o,window.Atalasoft.Controls.Capture.UploadToCaptureServer=c,window.Atalasoft.Controls.Capture.CaptureService=r,e.exports={}},function(e,t){e.exports=[11,0,0,418]},function(e,t,n){"use strict";function i(e){q.log("Atalasoft.Controls.Capture.WebScanning.initialize(...)"),M=e,void 0!==e.scanningOptions&&(R.scanningOptions=e.scanningOptions),void 0!==e.uploadOptions&&(R.uploadOptions=e.uploadOptions),w(W,e.localization),P()||(k(N.getScanClient()),P().initialize({onScanError:e.onScanError,onScanStarted:e.onScanStarted,onScanCompleted:e.onScanCompleted,onImageAcquired:e.onImageAcquired,onImageDiscarded:e.onImageDiscarded,onScanClientReady:function(){D()},eventBindObject:B(),localization:W,scanningOptions:R.scanningOptions}),j(window).bind("beforeunload",z).bind("unload",z)),U.initialize({handlerUrl:e.handlerUrl,serverTimeout:e.serverTimeout,onUploadError:e.onUploadError,onUploadStarted:e.onUploadStarted,onUploadCompleted:e.onUploadCompleted,uploadLocation:e.uploadLocation,eventBindObject:B(),uploadOptions:R.uploadOptions})}function o(e,t){U.dispose(),P()&&P().__shutdown(function(){k(null),R.LocalFile=null,j(window).unbind("beforeunload",z).unbind("unload",z),E(),e&&e()},function(){E(),t&&"function"==typeof t&&t.apply(null,arguments)})}function r(){return!!P()}function a(e){return P().enumerateScanners.apply(P(),arguments)}function s(){var e=P();return e?e.getSessionId():""}function l(){var e=P();return e?e.getPersistentPath():""}function c(e){void 0===e&&(e=R.scanningOptions),P().scan(e,U.getUploadCallback())}function d(){P().abortScan()}function u(e){void 0===e&&(e=R.scanningOptions),P().importFiles(e)}function p(e,t){e||(e=R.scanningOptions),P().showSettingsDialog(e,t)}function f(e,t){e||(e=R.scanningOptions),P().getSupportedValues(e,t)}function h(e,t){e||(e=R.scanningOptions),P().getCurrentValues(e,t)}function m(e){q.deprecate("Atalasoft.Controls.Capture.WebScanning.setSymmetricEncryptionKey","Atalasoft.Controls.Capture.WebScanning.LocalFile.setEncryptionKey"),P().setSymmetricEncryptionKey(e)}function g(e){return q.deprecate("Atalasoft.Controls.Capture.WebScanning.saveBase64ToEncryptedLocalFile","Atalasoft.Controls.Capture.WebScanning.LocalFile.fromBase64String"),P().saveBase64ToEncryptedLocalFile(e)}function _(e,t,n){return q.deprecate("Atalasoft.Controls.Capture.WebScanning.encryptedLocalFileAsBase64String","Atalasoft.Controls.Capture.WebScanning.LocalFile.asBase64String"),P().encryptedLocalFileAsBase64String(e,t,n)}function v(e){q.deprecate("Atalasoft.Controls.Capture.WebScanning.deleteLocalFile","Atalasoft.Controls.Capture.WebScanning.LocalFile.remove"),P().deleteLocalFile(e)}function y(){return q.deprecate("Atalasoft.Controls.Capture.WebScanning.listLocalFiles","Atalasoft.Controls.Capture.WebScanning.LocalFile.list"),P().listLocalFiles()}function b(e){P().setBarcodeLicense(e)}function S(e){return void 0===e&&(e=R.scanningOptions),JSON.stringify(e)}function F(e){R.scanningOptions=j.parseJSON(e)}function C(){var e=P();return e?e.getVersion():null}function x(){var e=P();return r()&&e?e.getScanStationName():null}function w(e,t){if(t)for(var n in e)e.hasOwnProperty(n)&&"string"==typeof e[n]&&n in t&&(e[n]=t[n])}function T(){j.getJSON(M.handlerUrl+"?cmd=getLicense",{},function(e){I(e)}).fail(function(e){W.report(M.onScanError,W.licensingError,e)})}function I(e){P().setLicense(e,function(){P().enumerateScanners(function(){A(),M.onScanClientReady&&P().isSupportedBrowser&&M.onScanClientReady()})})}function D(){R.isSupportedBrowser=P().isSupportedBrowser,P().isSupportedBrowser&&(R.LocalFile={setEncryptionKey:function(e,t){P().setSymmetricEncryptionKey(e,t)},fromBase64String:function(e,t){return P().saveBase64ToEncryptedLocalFile(e,t)},asBase64String:function(e,t,n,i){return P().encryptedLocalFileAsBase64String.apply(P(),arguments)},splitToFiles:function(e,t,n){return P().splitToFiles.apply(P(),arguments)},remove:function(e,t){P().deleteLocalFile(e,t)},list:function(e){return P().listLocalFiles(e)},removeAll:function(e){P().removeAll(e)},globalPurgeByAge:function(e,t){P().globalPurgeByAge(e,t)}}),M.license?(I(M.license),delete M.license):P().isSupportedBrowser&&T()}function B(){return j("body")}function A(){L(P().scanners,j(".atala-scan-button")),V(j(".atala-local-file-import-button")),O(P().scanners,P().defaultScanner,j(".atala-scanner-list"))}function E(){j(".atala-scan-button, .atala-local-file-import-button").each(function(e,t){j(t).off("click").attr("disabled",!0)}),j(".atala-scanner-list").each(function(e,t){j(this).attr("disabled",!0).empty(),t.onchange=null})}function L(e,t){e.length>0?(t.click(function(){c()}),t.removeAttr("disabled")):t.attr("disabled",!0)}function O(e,t,n){if(n.length>0){var i=n[0];if(i.length=0,e.length>0){for(var o=0;o<e.length;o++){var r=document.createElement("option");r.text=e[o],r.value=e[o],i.add(r),r.text===t&&(i.selectedIndex=i.length-1)}i.onchange=function(){P().onScannerSelected(i.options[i.selectedIndex].value)},n.removeAttr("disabled")}else n.attr("disabled",!0)}else P().onScannerSelected(t)}function V(e){e.click(function(){u()}),e.removeAttr("disabled")}function z(){if(P()){if(P().abortScan(),M.onShutdown)try{M.onShutdown()}catch(e){}P().__shutdown()}}function P(){return R._scanClient}function k(e){R._scanClient=e}var j=n(3),N=n(4),U=n(16),W=n(6),q=n(5),R=(n(17),{_scanClient:null,scanningOptions:{},uploadOptions:{},LocalFile:null,isSupportedBrowser:!1}),M={};j.extend(R,{initialize:i,isInitialized:r,dispose:o,enumerateScanners:a,getSessionId:s,getStoragePath:l,scan:c,abortScan:d,importFiles:u,showSettingsDialog:p,getSupportedValues:f,getCurrentValues:h,setBarcodeLicense:b,getProfile:S,setProfile:F,getVersion:C,getScanStationName:x,setSymmetricEncryptionKey:m,saveBase64ToEncryptedLocalFile:g,encryptedLocalFileAsBase64String:_,deleteLocalFile:v,listLocalFiles:y}),e.exports=R},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";var i=(n(3),n(5),n(1)),o=n(6),r=n(7),a={_localization:{notWindows:"Platform is not Windows: ",ieVersion:"IE version not supported: ",notSupported:"Not currently supported: ",pluginVersion:"Plugin is version: ",minVersionNeeded:"minimum version needed: "},getScanClient:function(){if("Win"!==navigator.platform.substring(0,3))return s._badBrowser=this._localization.notWindows+navigator.platform,s;var e=this.__detectBrowser();return e.msie&&e.version<8?(s._badBrowser=this._localization.ieVersion+e.version,s):e.msie||e.firefox||e.chrome?(r._browser=e,r):(s._badBrowser=this._localization.notSupported+(e.name||navigator.userAgent),s)},__detectBrowser:function(){function e(e){var t=n.match(e);return t&&t.length>1&&t[1]||""}var t={name:""},n=navigator.userAgent||"";return/Opera\W|\sOPR\W/.test(n)?t={name:"Opera",opera:!0,version:parseFloat(e(/(?:.*Version\W|Opera\W|\sOPR\W)(\d+\.\d+)/))}:/msie|trident/i.test(n)?t={name:"Internet Explorer",msie:!0,version:parseFloat(e(/(?:msie |rv:)(\d+\.\d+)/i))}:/chrome/i.test(n)?t={name:"Chrome",chrome:!0,version:parseFloat(e(/(?:chrome|crios|crmo)\/(\d+\.\d+)/i))}:/firefox|iceweasel/i.test(n)?t={name:"Firefox",firefox:!0,version:parseFloat(e(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i))}:/safari/i.test(n)&&(t={name:"Safari",safari:!0,version:parseFloat(e(/Version\W(\d+\.\d+)/i))}),t}},s={abortScan:function(){},deleteLocalFile:function(e){},encryptedLocalFileAsBase64String:function(e,t,n){return null},getSupportedValues:function(e,t){t(null)},globalPurgeByAge:function(e){},importFiles:function(e){},initialize:function(e){e.onScanClientReady&&e.onScanClientReady(),o.report(e.onScanError,o.badBrowser,this._badBrowser)},isInstalled:function(){return!0},isAppropriateForClient:function(){return!0},listLocalFiles:function(){return null},removeAll:function(){},saveBase64ToEncryptedLocalFile:function(e){return null},scan:function(e,t){},setBarcodeLicense:function(e){},setLicense:function(e){return!1},setSymmetricEncryptionKey:function(e){},getVersion:function(){return i.slice()},getScanStationName:function(){},showSettingsDialog:function(e,t){t({complete:!1})},__shutdown:function(e,t){},scanners:[],defaultScanner:"",isSupportedBrowser:!1,onScannerSelected:function(e){},_badBrowser:""};e.exports=a},function(e,t){"use strict";function n(t,n,i){var o=window.console;return function(){return(i||n)&&o&&o[t]&&"function"==typeof o[t]&&o[t].apply(o,arguments),e.exports}}var i={},o=n("group",!0),r=n("groupEnd",!0),a=n("time",!0),s=n("timeEnd",!0),l=function(){var e=0;return function(){return e+=1,"Time Sequence "+e}}(),c=function(){this.TraceEnabled=!1;var e=this;return{error:n("error",e.TraceEnabled,!0),warn:n("warn",e.TraceEnabled,!0),log:n("log",e.TraceEnabled),info:n("info",e.TraceEnabled),object:n("dir",e.TraceEnabled),debug:n("debug",e.TraceEnabled),deprecate:function(e,t){i[e]||(i[e]=t,this.warn("'%s' is deprecated. Please use '%s' instead.",e,t))},scope:function(){var t=Array.prototype.slice.call(arguments),n=t.pop();if(e.TraceEnabled){var i=l();o.apply(this,t),a(i);try{n()}finally{s(i),r()}}else n()},enable:function(){e.TraceEnabled=!0}}};e.exports=new c},function(e,t,n){"use strict";var i=n(3),o={report:function(e,t,n){e?e(t,n):i.error(t)},ajax:"Could not create an XMLHttpRequest object needed for uploading.",badBrowser:"Scanning requires Chrome, FireFox, or Internet Explorer (at least version 8 and with Compatibility View Mode disabled) running on Windows.",badVrsLicense:"VRS license is missing or invalid.",licensingError:"The server did not return valid licensing information.",vrsBadCommand:"eVRS command string is invalid.",batchFieldValidationError:"Batch field validation failed.",indexFieldValidationError:"IndexField validation failed.",fieldValidationError:"Batch, or index field validation failed.",batchFieldsError:"The server could not retrieve the batch fields for the selected batch class.",contentTypesError:"The server could not retrieve content types.",contentDescError:"The server could not retrieve the content description.",docClassIndexFieldError:"The server could not retrieve the index fields for the document class.",doorOpen:"Scanner reports cover open.",doubleFeed:"Scanner reports a double-feed.",driverCrash:"Fatal exception in scanner driver.",dsmFail:"Failure in TWAIN Manager.",dsOpen:"Failed to open scanner.",fileFail:"File not found or cannot be written or cannot be read.",fileLocked:"File locked by other application.",helperDll:"Failed to load scanning service helper DLL.",importError:"The server could not import the document.",internalError:"Unexpected internal error.",noPlugin:"The scanning service needs to be installed. If it is installed it may need to be enabled. In the browser look for Add-ons, Plugins, Kofax scanning.",noTwain:"The TWAIN Manager needs to be installed.",oldPlugin:"The scanning service needs to be updated to a newer version.",oldWindowsService:"The scanning service needs to be updated to a newer version. Contact your administrator for assistance.",outOfMemory:"Insufficient memory to complete an operation. Restarting the Scanning Service may help.",paperJam:"Scanner reports a paper jam.",scanFail:"Unable to start scan.",serverNotResponding:"The server is not responding.",tooManyImages:"Too many images for Scanning service to handle.",unsupportedFormatWarning:"Warning: Only the following image file types are supported for import: BMP, GIF, JPG/JPEG, PDF, TIFF. All other file types will be ignored and will not be imported.",uploadError:"The server reported an error while uploading.",userCancel:"",vrsBadDpiWarning:"Warning: One or more images were skipped - Image Enhancement requires image DPI > 25",xferFail:"Image transfer from scanner failed.",webServiceMissed:"Web Capture local service is not running.",lowIntegrityAccessDenied:"Access to the Web Capture Service is denied because the current user has insufficient rights. This can have happened if you have visited site with the untrusted certificate or connect to the Web Capture Service from internet. Contact your administrator for assistance.",brokenConnection:"Connection to the scanning service is broken. You may need to refresh the page to restore it."};e.exports=o},function(e,t,n){"use strict";var i=n(3),o=n(5),r=n(1),a=n(6),s=n(8),l=n(9),c=n(12),d=n(13),u=n(14),p=n(15),f={SessionId:0,HostRunsAsService:!1,PersistentPath:"",ReadyState:1,TwainAvailable:!1,InstalledSources:[],DefaultSourceDevice:"",scanningOptions:{scanner:null,applyVRS:!0,evrsSettings:null,brightness:0,contrast:0,threshold:-1,showScannerUI:!1,showProgress:!1,pixelType:u.Any,resultPixelType:u.Any,duplex:d.ScanMode.Simplex,dpi:200,feeder:d.FeederType.Any,paperSize:d.PaperSize.USLetter,orientation:d.Orientation.Any,disableVRSIfInstalledOnWorkstation:!1,deskew:!0,autoRotate:!0,autoCrop:!1,holeFill:!1,despeckle:!1,discardBlankPages:!1,suppressBackgroundColor:!1,maxPages:-1,patchCodes:!1,importEDocs:!1,deliverables:{localFile:{format:"tif",jpegCompression:!1,quality:75,split:!1,chunkSize:0},originalImageFile:{format:"tif",jpegCompression:!1,quality:75},thumbnail:{format:"tif",jpegCompression:!1,quality:75,height:void 0,width:void 0}},barcodes:{count:0,checksums:!1,symbology:void 0},imageAddress:void 0,imprintersConfig:void 0,tiff:{jpegCompression:!1},jpeg:{quality:75},kofaxVRSEliteProfileName:null},_shutdown:!1,connectionBroken:!0,eventsUrl:"",settingsUrl:"",images:"",image:"",_sessionsKey:"sessions",initialize:function(e,t,n,i){var r=this;o.scope("WebTwain.initialize()",function(){r._shutdown=!1,r._server=s,r._server.setLimitedMode(t.msie&&t.version<10);var o={localization:e.localization,scanningOptions:r.extendScanningOptions(e.scanningOptions)};r.__retryConnection(o,function(e){r.SessionId=e.id,r.HostRunsAsService=e.hostRunsAsService,r.PersistentPath=e.persistentPath,r.self=e.self,r.eventsUrl=e.events,r.settingsUrl=e.settings,r.images=e.images,r.Scan=new p(e,r),r.LocalFile=new c(e),r.scanningOptions=r.extendScanningOptions(e.scanningOptions),r.ReadyState=e.readyState||1,r.TwainAvailable=e.twainAvailable,r.AppTitle=e.appTitle,r.Localization=e.localization,r.FullVersion=JSON.parse("["+e.fullVersion.split(".").join(",")+"]"),r.machineName=e.machineName,r.connectionBroken=!1,r.closeAbandonedSessions(function(){n&&n.call&&n.call(r)})},i)})},extendScanningOptions:function(e){var t={};return e=e||{},"string"==typeof e.scanner?t.scanner=e.scanner:this._eztwain&&(t.scanner=this._eztwain.SourceDevice),t.brightness=void 0!==e.brightness?Number(e.brightness):0,t.contrast=void 0!==e.contrast?Number(e.contrast):0,t.threshold=void 0!==e.threshold?Number(e.threshold):-1,t.showScannerUI=e.showScannerUI||!1,t.showProgress=e.showProgress||!1,t.pixelType=void 0!==e.pixelType?Number(e.pixelType):-1,t.resultPixelType=void 0!==e.resultPixelType?Number(e.resultPixelType):-1,t.duplex=void 0!==e.duplex?Number(e.duplex):0,t.dpi=Number(e.dpi)||200,t.feeder=void 0!==e.feeder?Number(e.feeder):-1,t.paperSize=void 0!==e.paperSize?Number(e.paperSize):3,t.orientation=void 0!==e.orientation?Number(e.orientation):-1,t.applyVRS=void 0===e.applyVRS||e.applyVRS,t.disableVRSIfInstalledOnWorkstation=e.disableVRSIfInstalledOnWorkstation||!1,t.deskew=void 0!==e.deskew?e.deskew:t.applyVRS,t.autoRotate=void 0!==e.autoRotate?e.autoRotate:t.applyVRS,t.autoCrop=e.autoCrop||!1,t.holeFill=e.holeFill||!1,t.despeckle=e.despeckle||!1,t.discardBlankPages=e.discardBlankPages||!1,t.suppressBackgroundColor=e.suppressBackgroundColor||!1,t.maxPages=Number(e.maxPages)||-1,t.patchCodes=e.patchCodes||!1,t.importEDocs=e.importEDocs||!1,t.feeder===d.FeederType.Flatbed&&t.duplex===d.ScanMode.Duplex&&(t.duplex=d.ScanMode.Simplex),"object"==typeof e.barcodes?(t.barcodes=e.barcodes,t.barcodes.hasOwnProperty("count")||(t.barcodes.count=-1)):t.barcodes={count:0},t.tiff=t.tiff||{jpegCompression:!0},e.tiff&&void 0!==e.tiff.jpegCompression&&(t.tiff.jpegCompression=e.tiff.jpegCompression),t.jpeg=t.jpeg||{},t.jpeg.quality=Number(e.jpeg&&e.jpeg.quality||75),t.evrsSettings="string"==typeof e.evrsSettings?e.evrsSettings:"",t.deliverables="object"==typeof e.deliverables?e.deliverables:{},"object"==typeof e.imageAddress?t.imageAddress=e.imageAddress:delete t.imageAddress,"object"==typeof e.imprintersConfig?t.imprintersConfig=e.imprintersConfig:delete t.imprintersConfig,this._eztwain&&this._eztwain.scanningOptions&&(this._eztwain.scanningOptions=t),t},closeAbandonedSessions:function(e){var t=this,n={future:null},i=function(e,t){return function(){n.future=e.shutdownWorker(t)}};if(t._server.isLimitedMode()&&window.localStorage){var o=window.localStorage.getItem(t._sessionsKey);if(o){o=JSON.parse(o);for(var r=0;r<o.length;++r){var a=o[r];a&&(n.future?n.future.always(i(t,a)):n.future=t.shutdownWorker(a))}}}n.future?n.future.always(function(){window.localStorage.removeItem(t._sessionsKey),e()}):e()},reloadScanners:function(e,t){var n=this;this._server.get(this.self,{},e).done(function(e){n.InstalledSources=e.installedSources||[],n.DefaultSourceDevice=e.defaultSourceDevice,n.SourceDevice=e.sourceDevice,t&&t()})},shutdown:function(e,t){var n=this,i=n._sessionsKey;o.scope("WebTwain.shutdown()",function(){if(n.self){if(n.shutdownWorker(n.self).done(function(){n._shutdown=!0,n.self=void 0,n.settingsUrl=void 0,n.eventsUrl=void 0,n.images=void 0,n.SessionId=null,n.Scan.uninitialize(),n.onacquiredone=function(){},n.onacquirefailed=function(e,t){},n.onimageacquired=function(e,t){},n.onimagediscarded=function(){},n.onscanerror=function(e,t){},n._server.releaseDeffered(),e&&e()}).fail(function(e,n,i){o.warn("WebTwain.shutdown() error "+n+"; "+i),t&&t(a.internalError,{})}),n._server.isLimitedMode()&&window.localStorage){var r=window.localStorage.getItem(i)||"[]";r=JSON.parse(r),r.push(n.self),window.localStorage.setItem(i,JSON.stringify(r))}}else n._shutdown=!0})},shutdownWorker:function(e){var t=this,n=null;return o.scope("WebTwain.shutdownWorker: "+e,function(){n=t._server.del(e,{},!1)}),n},updateSettings:function(e,t){return this._server.put(this.self,e,t)},AsBase64String:function(e,t,n){var i=this,r="";return o.scope("WebTwain.Clear()",function(){i._server&&i.images&&i._server.get(i.images,{format:e||t.format,jpegCompression:t?t.jpegCompression:void 0,quality:t?t.quality:void 0},"function"==typeof n).done(function(e){r=e.base64||"",n&&"function"==typeof n&&n(r)}).fail(function(e,t,n){o.log("WebTwain.AsBase64String() error "+t+"; "+n)})}),r},Clear:function(){var e=this;o.scope("WebTwain.Clear()",function(){e._server&&e.images&&e._server.del(e.images)})},DeleteImage:function(e){o.scope("WebTwain.DeleteImage()",function(){e&&e.clear&&e.clear()})},onacquiredone:function(){},onacquirefailed:function(e,t){},onimageacquired:function(e,t){},onimagediscarded:function(){},onscanerror:function(e,t){},startEventsPoll:function(e){var t={AcquireDone:0,AcquireFailed:1,ImageAcquired:2,ScanError:3,SupportedValues:4,ScanDialogComplete:5,SessionDisposed:6,CurrentValues:7,ImageDiscarded:8},n=this,i=0;this._server.poll(this.eventsUrl,function(e){switch(n.connectionBroken=!1,i=0,e.eventType){case t.AcquireDone:n.onacquiredone();break;case t.AcquireFailed:n.onacquirefailed(e.message,e.details);break;case t.ImageAcquired:var o=new l(e.image.sessionId,e.image.index,e.image);n.onimageacquired(e.index,o);break;case t.ScanError:n.onscanerror(e.message,e.details);break;case t.SupportedValues:n._server.executeDeferredCallback(e.callbackId,e.values);break;case t.ScanDialogComplete:n._server.executeDeferredCallback(e.callbackId,e.complete);break;case t.SessionDisposed:return!1;case t.CurrentValues:n._server.executeDeferredCallback(e.callbackId,e.values);break;case t.ImageDiscarded:n.onimagediscarded()}return!n._shutdown},function(e){if(e){if(404===e.status)return n.reportBrokenConnection(a.brokenConnection),!1;if((500===e.status||0===e.status)&&!n._shutdown&&++i>15)return n.reportBrokenConnection(),i=0,!1}return!n._shutdown})},reportBrokenConnection:function(e){var t=this;t.connectionBroken||(t.connectionBroken=!0,e?h.__reportError(e):h.__reportError(a.noPlugin,{message:a.webServiceMissed,filename:h._installerFileName}))},__serviceUrlBase:"https:"===window.location.protocol?"https://127.0.0.1:23024":"http://127.0.0.1:23023",__retryConnection:function(e,t,n){var i=2e3,o=this;o._shutdown||this._server.post(this.__serviceUrlBase+"/sessions",e,!0).done(function(e){t.call(o,e)}).fail(function(r){n&&n(r),window.setTimeout(function(){o.__retryConnection(e,t)},i)})}},h={scanners:[],defaultScanner:"",isSupportedBrowser:!0,_logger:o,_installerFileName:"Kofax.WebCapture.Installer.msi",_eztwain:{},_params:{},_lastSheetNo:-1,_aborting:!1,_localization:{not32Bit:"Browser is not 32-bit: ",notWindows:"Platform is not Windows: ",ieVersion:"IE version not supported: ",notSupported:"Not currently supported: ",pluginVersion:"Plugin is version: ",minVersionNeeded:"minimum version needed: "},__reportError:function(e,t){a.report(this._params.onScanError,e,t)},getVersion:function(){return this._eztwain.FullVersion},getScanStationName:function(){return this._eztwain.machineName},deleteLocalFile:function(e,t){var n=this._eztwain.LocalFile;"function"==typeof t?n.removeAsync(e,t):n.remove(e)},encryptedLocalFileAsBase64String:function(){var e=Array.prototype.slice.call(arguments),t=e.slice(-1).pop(),n=this._eztwain.LocalFile;return"function"!=typeof t?n.asBase64String.apply(n,arguments):(e.unshift(e.pop()),void n.asBase64StringAsync.apply(n,e))},splitToFiles:function(){var e=Array.prototype.slice.call(arguments),t=this._eztwain.LocalFile;e.unshift(e.pop()),t.splitToFiles.apply(t,e)},globalPurgeByAge:function(e,t){var n=this._eztwain.LocalFile;"function"==typeof t?n.globalPurgeByAgeAsync(e,t):n.globalPurgeByAge(e)},listLocalFiles:function(e){var t=this._eztwain.LocalFile;return"function"!=typeof e?t.list():void t.listAsync(e)},removeAll:function(e){var t=this._eztwain.LocalFile;"function"==typeof e?t.removeAllAsync(e):t.removeAll()},saveBase64ToEncryptedLocalFile:function(e,t){var n=this._eztwain.LocalFile;return"function"!=typeof t?n.fromBase64String(e):void n.fromBase64StringAsync(e,t)},setBarcodeLicense:function(e){var t={barcodeLicense:e},n=this;this._eztwain.updateSettings(t,!0).fail(function(e,t,i){n._logger.error("setBarcodeLicense() failed: "+t+"; "+i),n.__reportError(a.internalError)})},setLicense:function(e,t){var n=this;if(e&&(e.key||e.barcode)){var i={domain:window.location.hostname};e.key&&(i.wingScanLicense=e.key),e.barcode&&(i.barcodeLicense=e.barcode),this._eztwain.updateSettings(i,!0).done(function(){t&&t(!0)}).fail(function(e,i,o){n._logger.error("setLicense() failed: "+i+"; "+o),t?t(!1):n.__reportError(a.internalError,{})})}return!0},setSymmetricEncryptionKey:function(e){var t=Array.prototype.slice.call(arguments),n=t.slice(-1).pop(),i="function"==typeof n,o=this;o._eztwain.updateSettings({symmetricEncryptionKey:e},i).done(n).fail(function(e,t,n){o._logger.error("setSymmetricEncryptionKey() failed: "+t+"; "+n),o.__reportError(a.internalError,{})})},enumerateScanners:function(){var e=Array.prototype.slice.call(arguments),t=e.slice(-1).pop(),n="function"==typeof t,o=i.Deferred(),r=this;this._eztwain.TwainAvailable?this._eztwain.reloadScanners(n,function(){r.scanners=r._eztwain.InstalledSources||[],r.defaultScanner=r._eztwain.DefaultSourceDevice,o.resolve(r.scanners)}):(this.__reportError(a.noTwain),o.resolve()),o.done(function(e){n&&t(e)})},onScannerSelected:function(e){this._eztwain.SourceDevice=e},isInstalled:function(){return!0},__bindEvents:function(e){var t=this._params.eventBindObject,n=e?t.bind:t.unbind;this._params.onScanStarted&&n.call(t,"onScanStarted",e?{}:this._params.onScanStarted,this._params.onScanStarted),this._params.onScanCompleted&&n.call(t,"onScanCompleted",e?{}:this._params.onScanCompleted,this._params.onScanCompleted),this._params.onImageAcquired&&n.call(t,"onImageAcquired",e?{}:this._params.onImageAcquired,this._params.onImageAcquired),this._params.onImageDiscarded&&n.call(t,"onImageDiscarded",e?{}:this._params.onImageDiscarded,this._params.onImageDiscarded),this._params.onScanError&&n.call(t,"onScanError",e?{}:this._params.onScanError,this._params.onScanError)},versionLess:function(e,t){return e[0]!==t[0]?e[0]<t[0]:e[1]!==t[1]?e[1]<t[1]:e[2]!==t[2]?e[2]<t[2]:e[3]<t[3]},__pluginTooOld:function(e,t){return this.versionLess(e.FullVersion,t)},__initEztwainWhenReady:function(){var e=r;if(this._eztwain&&4==this._eztwain.ReadyState)if(this.__pluginTooOld(this._eztwain,e)){var t=this._localization.pluginVersion+this._eztwain.FullVersion+" - "+this._localization.minVersionNeeded+e;this._eztwain.HostRunsAsService?this.__reportError(a.oldWindowsService,{message:t}):this.__reportError(a.oldPlugin,{message:t,filename:this._installerFileName})}else{this.__bindEvents(!0);var n=this;n._eztwain.onacquiredone=function(){n.__onAcquireDone()},n._eztwain.onacquirefailed=function(e,t){n.__onAcquireFailed(e,t)},n._eztwain.onimageacquired=function(e,t){n.__onImageAcquired(t)},n._eztwain.onimagediscarded=function(){n.__onImageDiscarded()},n._eztwain.onscanerror=function(e,t){n.__reportError(e,{message:t})},n._eztwain.startEventsPoll(n._eztwain.SessionId),n._logger.info("minVer:                 "+e).info("navigator.userAgent:    "+navigator.userAgent).info("navigator.vendor:       "+navigator.vendor).info("browser: "+n._browser.name).info("version: "+n._browser.version),n._params.onScanClientReady&&n._params.onScanClientReady()}else{var i=this;setTimeout(function(){i.__initEztwainWhenReady()},2e3)}},initialize:function(e){this._params=e,e.localization&&i.extend(this._localization,e.localization);var t=this;this._eztwain=f,this._eztwain.initialize(e,this._browser,function(){t.__initEztwainWhenReady()},function(e){e.responseText&&a[e.responseText]?t.__reportError(a[e.responseText]):t.__reportError(a.noPlugin,{message:a.webServiceMissed,filename:t._installerFileName})})},__shutdown:function(e,t){try{var n=this;this._eztwain&&this._eztwain.shutdown(function(){n.__bindEvents(!1),n.scanners=[],n._params={},n._eztwain=null,n._uploadFunction=null,e&&e()},t)}catch(e){t&&t(a.internalError,e)}},__onAcquireDone:function(){var e=this;this._logger.scope("onAcquireDone event",function(){e._logger.scope("calling user event handler...",function(){e._params.eventBindObject.trigger("onScanCompleted",{success:!0})}),e._uploadFunction&&e._logger.scope("calling uploadFunction.",function(){e._eztwain.AsBase64String(".tif",{},function(t){t&&t.length&&e._uploadFunction(t)})})})},__onAcquireFailed:function(e,t){var n=this;this._logger.scope("onAcquireFailed event (%s, %s)",e,t,function(){n._logger.scope("calling user event handler...",function(){n._params.eventBindObject.trigger("onScanCompleted",{success:!1,error:{message:e,details:t}})})})},__onImageAcquired:function(e){var t=this;this._logger.scope("onImageAcquired event",function(){t._logger.info("image:").object(e),e.discard=!1;try{t._aborting?e.discard=!0:t._logger.scope("calling user event handler...",function(){t._params.eventBindObject.trigger("onImageAcquired",e)})}catch(n){t.__reportError(a.internalError,n),e.discard=!0}e.discard&&t._eztwain.DeleteImage(e)})},__onImageDiscarded:function(){var e=this;this._logger.scope("onImageDiscarded event",function(){e._logger.scope("calling user event handler...",function(){e._params.eventBindObject.trigger("onImageDiscarded")})})},scan:function(e,t){if(this._eztwain){this._aborting=!1,this._params.eventBindObject.trigger("onScanStarted",{});try{this._eztwain.Clear(),this._lastSheetNo=-1,this._uploadFunction=t;var n=this._eztwain.extendScanningOptions(e);this._eztwain.Scan.start(n)||this._params.eventBindObject.trigger("onScanCompleted",{success:!1,error:{message:a.scanFail}})}catch(e){this.__reportError(a.internalError,e),this._params.eventBindObject.trigger("onScanCompleted",{success:!1,error:e})}}},abortScan:function(){this._eztwain&&(this._aborting=!0,this._eztwain.Scan&&this._eztwain.Scan.abort&&this._eztwain.Scan.abort())},importFiles:function(e){if(this._eztwain){this._aborting=!1,this._params.eventBindObject.trigger("onScanStarted",{});try{this._eztwain.Clear(),this._lastSheetNo=-1,this._uploadFunction=null;var t=this._eztwain.extendScanningOptions(e);this._eztwain.Scan.importFiles(t)||this._params.eventBindObject.trigger("onScanCompleted",{success:!1,error:{message:a.scanFail}})}catch(e){this.__reportError(a.internalError,e),this._params.eventBindObject.trigger("onScanCompleted",{success:!1,error:e})}}},showSettingsDialog:function(e,t){try{"string"!=typeof e.scanner&&(e.scanner=this._eztwain.SourceDevice),this._eztwain.Scan.showSettingsDialog(e,t)}catch(e){this.__reportError(a.internalError,e)}},getSessionId:function(){return this._eztwain.SessionId},getPersistentPath:function(){return this._eztwain.PersistentPath},getSupportedValues:function(e,t){try{this._eztwain.Scan.getSupportedValues?("string"!=typeof e.scanner&&(e.scanner=this._eztwain.SourceDevice),this._eztwain.Scan.getSupportedValues(e,t)):t()}catch(e){this.__reportError(a.internalError,e)}},getCurrentValues:function(e,t){try{this._eztwain.Scan.getCurrentValues?("string"!=typeof e.scanner&&(e.scanner=this._eztwain.SourceDevice),this._eztwain.Scan.getCurrentValues(e,t)):t()}catch(e){this.__reportError(a.internalError,e)}},clear:function(){this._eztwain.Clear()}};e.exports=h},function(e,t,n){function i(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)})}function o(e,t,n){m.scope(e,t,function(){m.log("Body: ").object(n)})}function r(e){m.log("Setting limited mode: ",e),_=void 0!==e&&e}function a(){return _}function s(e,t,n){return o("GET",e,t),g.ajax({url:e,cache:!1,data:t,type:"GET",async:void 0===n||n||_,global:!1})}function l(e,t,n){return o("POST",e,t),g.ajax({url:e,cache:!1,data:JSON.stringify(t||{}),contentType:"application/json",dataType:"json",type:"POST",async:void 0===n||n||_,global:!1})}function c(e,t,n){var i=_?"POST":"PUT",r=_?e+"?debugMethod=PUT":e;return o(i,r,t),g.ajax({url:r,cache:!1,data:JSON.stringify(t||{}),contentType:"application/json",dataType:"json",type:i,async:void 0===n||n||_,global:!1})}function d(e,t,n){var i=_?"POST":"DELETE",r=_?e+"?debugMethod=DELETE":e;return o(i,r,t),g.ajax({url:r,cache:!1,data:JSON.stringify(t||{}),type:i,async:n||_,global:!1})}function u(e,t,n){var i=this;g.ajax({url:e,type:"POST",cache:!1,dataType:"text",timeout:3e4,global:!1,success:function(o){o=o?JSON.parse(o):{},t(o)&&i.poll(e,t,n)},error:function(o){n(o)&&setTimeout(function(){i.poll(e,t,n)},1e3)}})}function p(e,t,n,o){var r=i();return n=n||{},n.callbackId=r,e(t,n).done(function(){v[r]=o})}function f(e){if(v[e]){var t=Array.prototype.slice.call(arguments,1);v[e].apply(this,t),delete v[e]}}function h(){v={}}var m=n(5),g=n(3),_=!1,v={};e.exports={get:s,post:l,put:c,del:d,poll:u,callDeferred:p,executeDeferredCallback:f,releaseDeffered:h,setLimitedMode:r,isLimitedMode:a}},function(e,t,n){"use strict";var i=n(5),o=(n(8),n(3)),r=n(10),a=n(11),s=function(e,t,n){r.apply(this,arguments),this.thumbnailData=new a(this.id,o.extend(!0,n.thumbnailData,{thumb:n.thumb}))};s.prototype=o.extend({thumbnail:function(e,t){return this.thumbnailData&&this.thumbnailData.requestedWidth===e&&this.thumbnailData.requestedHeight===t||(this.thumbnailData=new a(this.id,{
thumb:this.thumbUrl,width:e,height:t,requestedWidth:e,requestedHeight:t})),this.thumbnailData},Thumbnail:function(){return i.deprecate("Thumbnail","thumbnail"),this.thumbnail.apply(this,arguments)}},r.prototype),e.exports=s},function(e,t,n){"use strict";function i(e){return function(t,n,i){e.reject(),l.warn("Status:",n,"Error:",i)}}function o(e,t,n){var o=d.Deferred(),r=this;return l.scope("Image.asBase64String",e,function(){if(l.info("Options:").object(t),r.id&&r.selfUrl){var a={jpegCompression:t?t.jpegCompression:void 0,quality:t?t.quality:void 0,format:e||(t?t.format:void 0),width:r.width,height:r.height};c.get(r.selfUrl,a,n).done(function(e){r.updateData(e),o.resolve(e.base64)}).fail(i(o))}else l.warn("attempting to call asBase64String on empty object."),o.reject()}),o}function r(e,t,n){var o=d.Deferred(),r=this;return l.scope("Image.saveEncryptedLocal",e,function(){if(l.info("Options:").object(t),r.id&&r.selfUrl){var a={format:e||(t?t.format:void 0),jpegCompression:t?t.jpegCompression:void 0,quality:t?t.quality:void 0,width:r.width,height:r.height};c.put(r.selfUrl,a,n).done(function(e){r.localFile=e.id,o.resolve(e.id)}).fail(i(o))}else l.warn("attempting to call saveEncryptedLocal on empty object."),o.reject()}),o}function a(e,t){var n=t||null;return e.done(function(e){n=e}),n}function s(e,t){var n=this;e.done(function(e){t.call(n,e)}).fail(function(){t.call(n)})}var l=n(5),c=n(8),d=n(3),u=function(e){this.patchCode=e.patchCode||"",this.PatchCode=this.patchCode,this.barcodes=e.barcodes||[],this.Barcodes=this.barcodes,this.imprintedText=e.imprintedText||"",this.ImprintedText=this.imprintedText,this.Filename=e.filename,this.localFile=e.localFile||"",this.localFileChunks=e.localFileChunks,this.originalImage=e.originalImage,this.discard=!1,this.eDoc=e.eDoc,this.path=e.path,e.eDoc?this.filename=this.Filename=e.filename:(this.bitsPerPixel=e.bitsPerPixel||-1,this.BitsPerPixel=this.bitsPerPixel,this.pixelType=e.pixelType||-1,this.PixelType=this.pixelType,this.width=e.width||0,this.Width=this.width,this.height=e.height||0,this.Height=this.height,this.xdpi=e.xdpi||-1,this.XResolution=this.xdpi,this.ydpi=e.ydpi||-1,this.YResolution=this.ydpi,this.dpi=[this.xdpi,this.ydpi],this.PageSide=e.pageSide,"front"in e&&(this.front=e.front),this.SheetNo=e.sheetNo,"sheetNo"in e&&(this.sheetNo=e.sheetNo),"newSheet"in e&&(this.newSheet=e.newSheet))},p={asBase64String:function(e,t){return a.call(this,o.call(this,e,t,!1))},saveEncryptedLocal:function(e,t){return a.call(this,r.call(this,e,t,!1))}},f={asBase64String:function(e,t,n){s.call(this,o.call(this,t,n,!0),e)},saveEncryptedLocal:function(e,t,n){s.call(this,r.call(this,t,n,!0),e)}},h=function(e,t,n){this.id=t,n=n||{},u.call(this,n),this.selfUrl=n.self,this.alternatives=n.alternatives,this.thumbUrl=n.thumb};h.prototype={updateData:function(e){u.call(this,e)},asBase64String:function(e,t){var n=Array.prototype.slice.call(arguments),i=n.slice(-1).pop();return"function"!=typeof i?p.asBase64String.apply(this,n):(n.unshift(n.pop()),void f.asBase64String.apply(this,n))},saveEncryptedLocal:function(e,t,n){var i=Array.prototype.slice.call(arguments);return n=i.slice(-1).pop(),"function"!=typeof n?p.saveEncryptedLocal.apply(this,i):(i.unshift(i.pop()),void f.saveEncryptedLocal.apply(this,i))},clear:function(){if(this.id&&this.selfUrl)return c.del(this.selfUrl,{},!0).done(function(){this.selfUrl=null,this.alternativesUrl=null,this.id=null})},AsBase64String:function(){return l.deprecate("AsBase64String","asBase64String"),this.asBase64String.apply(this,arguments)},SaveEncryptedLocalFile:function(){return l.deprecate("SaveEncryptedLocalFile","saveEncryptedLocal"),this.saveEncryptedLocal.apply(this,arguments)}},e.exports=h},function(e,t,n){var i=n(10),o=i.prototype,r=function(e){o.updateData.call(this,e),this.base64=e.base64,this.format=e.format,this.jpegCompression=e.jpegCompression,this.quality=e.quality,this.requestedWidth=e.requestedWidth,this.requestedHeight=e.requestedHeight},a=function(e,t){this.id=e,t=t||{},r.call(this,t),this.selfUrl=t.thumb,this.thumbUrl=null};a.prototype={updateData:function(e){r.call(this,e)},asBase64String:function(e,t){var n=Array.prototype.slice.call(arguments),i=n.slice(-1).pop();return"function"!=typeof i&&(i=void 0),this.base64&&this.format===e&&(!t||this.jpegCompression===t.jpegCompression&&this.quality==t.quality)?i?i(this.base64):this.base64:o.asBase64String.apply(this,arguments)},saveEncryptedLocal:function(){return o.saveEncryptedLocal.apply(this,arguments)},clear:function(){this.id=null,this.selfUrl=null,this.base64=null}},e.exports=a},function(e,t,n){"use strict";function i(e){h=e.file,g=e.files,m=e.splitFile}function o(e){return function(t,n,i){e.reject(),_.warn("Status: %s, Error: %s",n,i)}}function r(e,t,n,i){var r=y.Deferred();return _.scope("LocalFile.asBase64String("+e+","+t+","+n+")",function(){if(h&&e){var a={format:t||(n?n.format:void 0),jpegCompression:n?n.jpegCompression:void 0,quality:n?n.quality:void 0};v.get(h+"/"+e,a,i).done(function(e){r.resolve(e)}).fail(o(r))}else r.reject()}),r}function a(e,t){var n=y.Deferred();return _.scope("LocalFile.fromBase64String()",function(){_.debug("Base64 string: %s",e),g&&e?v.post(g,{base64:e},t).done(function(e){n.resolve(e.id)}).fail(o(n)):n.reject()}),n}function s(e,t){var n=y.Deferred();return _.scope("LocalFile.splitToChunkFiles("+e+")",function(){m&&e?(t=t||{},v.post(m+"/"+e,t,!0).done(function(e){n.resolve(e)}).fail(o(n))):n.reject()}),n}function l(e){var t=y.Deferred();return _.scope("LocalFile.list()",function(){g?v.get(g,{},e).done(function(e){t.resolve(e)}).fail(o(t)):t.reject()}),t}function c(e,t){var n=y.Deferred();return _.scope("LocalFile.remove("+e+")",function(){h&&e?v.del(h+"/"+e,{},t).done(function(){n.resolve(!0)}).fail(o(n)):n.reject()}),n}function d(e){var t=y.Deferred();return _.scope("LocalFile.removeAll()",function(){g?v.del(g,{},e).done(function(){t.resolve(!0)}).fail(o(t)):t.reject()}),t}function u(e,t){var n=y.Deferred();return _.scope("LocalFile.globalPurgeByAge("+e+")",function(){g?v.del(g+"?age="+e,{},t).done(function(){n.resolve(!0)}).fail(o(n)):n.reject()}),n}function p(e,t){var n=void 0===t?void 0:t;return e.done(function(e){n=e}),n}function f(e,t,n){e.done(function(e){t(e)}).fail(function(){t(n)})}var h,m,g,_=n(5),v=n(8),y=n(3),b={asBase64String:function(e,t,n){return p(r(e,t,n,!1),"")},fromBase64String:function(e){return p(a(e,!1))},list:function(){return p(l(!1))},remove:function(e){return p(c(e,!1),!1)},removeAll:function(){return p(d(!1),!1)},globalPurgeByAge:function(e){return p(u(e,!1),!1)}},S={asBase64StringAsync:function(e,t,n,i){f(r(t,n,i,!0),e,"")},fromBase64StringAsync:function(e,t){f(a(e,!0),t)},listAsync:function(e){f(l(!0),e)},removeAsync:function(e,t){f(c(e,!0),t,!1)},removeAllAsync:function(e){f(d(!0),e,!1)},globalPurgeByAgeAsync:function(e,t){f(u(e,!0),t,!1)},splitToFiles:function(e,t,n){f(s(t,n),e)}};i.prototype=y.extend({},b,S),e.exports=i},function(e,t){"use strict";var n={Simplex:0,Duplex:1,Any:-1},i={Flatbed:0,Feeder:1,Any:-1},o={Portrait:0,Landscape:1,Any:-1},r={Any:-1,None:0,A4:1,JISB5:2,USLetter:3,USLegal:4,A5:5,ISOB4:6,ISOB6:7,USLedget:9,USExecutive:10,A3:11,ISOB3:12,A6:13,C4:14,C5:15,C6:16,Businesscard:53},a={ImprinterBefore:"ImprinterBefore",ImprinterAfter:"ImprinterAfter",ImprinterBottomBefore:"ImprinterBottomBefore",ImprinterBottomAfter:"ImprinterBottomAfter",EndorserBefore:"EndorserBefore",EndorserAfter:"EndorserAfter",EndorserBottomBefore:"EndorserBottomBefore",EndorserBottomAfter:"EndorserBottomAfter"};e.exports={ScanMode:n,FeederType:i,Orientation:o,PaperSize:r,ImprinterTypes:a}},function(e,t){"use strict";var n={Auto:-2,Any:-1,BW:0,Grayscale:1,Color:2,Indexed:3};e.exports=n},function(e,t,n){"use strict";var i,o,r,a,s,l=n(5),c=n(8),d=(n(3),function(e,t){i=e.scan,o=e.importFiles,r=e.settingsDialog,a=e.supportedValues,s=e.currentValues,this.scanClient=t});d.prototype={uninitialize:function(){i=void 0,o=void 0,r=void 0,a=void 0,s=void 0},start:function(e){return l.scope("Scan.start()",function(){c.post(i,e,!0).fail(function(e,t,n){l.error("Scan.start() error "+t+"; "+n),this.scanClient&&this.scanClient.reportBrokenConnection()})}),!0},abort:function(){return l.scope("Scan.abort()",function(){c.del(i,{},!1).fail(function(e,t,n){l.error("Scan.abort() error "+t+"; "+n)})}),!0},importFiles:function(e){return l.scope("Scan.importFiles()",function(){c.post(o,e,!0).fail(function(e,t,n){l.error("Scan.importFiles() error "+t+"; "+n),this.scanClient&&this.scanClient.reportBrokenConnection()})}),!0},showSettingsDialog:function(e,t){return l.scope("Scan.showSettingsDialog()",function(){c.callDeferred(c.post,r,e,t).fail(function(e,n,i){l.error("Scan.showSettingsDialog() error "+n+"; "+i),t({complete:!1}),this.scanClient&&this.scanClient.reportBrokenConnection()})}),!0},getSupportedValues:function(e,t){return l.scope("Scan.getSupportedValues()",function(){c.callDeferred(c.post,a,e,t).fail(function(e,n,i){l.error("Scan.getSupportedValues() error "+n+"; "+i),t({}),this.scanClient&&this.scanClient.reportBrokenConnection()})}),!0},getCurrentValues:function(e,t){return l.scope("Scan.getCurrentValues()",function(){c.callDeferred(c.post,s,e,t).fail(function(e,n,i){l.error("Scan.getCurrentValues() error "+n+"; "+i),t({}),this.scanClient&&this.scanClient.reportBrokenConnection()})}),!0}},e.exports=d},function(e,t,n){"use strict";var i=n(3),o=n(6),r=function(e,t,n){var i=this,r=e;this.callback=t||function(){},this.updating=!1,this.timeout=1e3*(Number(n.serverTimeout)||50),this.abort=function(){i.updating&&(i.updating=!1,i.xhr.abort(),i._serverTimeoutToken&&(clearTimeout(i._serverTimeoutToken),delete i._serverTimeoutToken),i.xhr=null)},this.__onTimeout=function(){i.abort(),i.onTimeout&&i.onTimeout()},this.send=function(e){if(i.updating)return!1;if(i.xhr=null,window.XMLHttpRequest&&(i.xhr=new XMLHttpRequest),null===i.xhr)return o.report(n.onUploadError,o.ajax),!1;i.xhr.onreadystatechange=function(){if(4===i.xhr.readyState){i.updating=!1,i._serverTimeoutToken&&(clearTimeout(i._serverTimeoutToken),delete i._serverTimeoutToken);try{i.callback(i.xhr.responseText,i.xhr.status,i.xhr.responseXML)}catch(e){}i.xhr=null}},i.updating=new Date;var t=r+"?"+i.updating.getTime();return i.xhr.open("POST",t,!0),i.xhr.setRequestHeader("Content-Type","multipart/form-data; boundary="+i.boundaryString),i.onTimeout&&(i._serverTimeoutToken=setTimeout(i.__onTimeout,i.timeout)),i.xhr.send(e),!0}},a=function(){function e(e){p=e||{},p.eventBindObject||(p.eventBindObject=i({})),a(!0)}function t(){return p&&p.handlerUrl}function n(){a(!1),p={}}function a(e){var t=p.eventBindObject,n=e?t.bind:t.unbind;p.onUploadStarted&&n.call(t,"onUploadStarted",e?{}:p.onUploadStarted,p.onUploadStarted),p.onUploadCompleted&&n.call(t,"onUploadCompleted",e?{}:p.onUploadCompleted,p.onUploadCompleted)}function s(){return function(e,t){c(e,t)}}function l(e){switch(e.substr(0,5)){case"JVBER":return"pdf";case"/9j/4":return"jpg";case"R0lGO":return"gif";case"iVBOR":return"png";case"TU0AK":return"tif";case"SUkqA":return"tif"}return"Qk"==e.substr(0,2)?"bmp":"bin"}function c(e,t){p.eventBindObject.trigger("onUploadStarted",{});var n=l(e),i={bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",pdf:"application/pdf",png:"image/png",tif:"image/tiff",bin:"application/octet-stream"}[n],a="\r\n"+f.dash_boundary+"\r\n";t||(t=p.uploadOptions||{});var s="";if("string"==typeof p.uploadLocation&&0!==p.uploadLocation.length&&(s+=a+'Content-Disposition: form-data; name="uploadLocation"\r\n\r\n'+p.uploadLocation),t.formData)for(var c in t.formData)t.formData.hasOwnProperty(c)&&(s+=a+'Content-Disposition: form-data; name="'+c+'"\r\n\r\n'+d(t.formData[c]));if(t.extraParts){var h,m=t.extraParts;for(h=0;h<m.length;h++)s+=a+m[h]}var g=new r(p.handlerUrl,function(e,t,n){u(e,t)},p);g.boundary=f.dash_boundary,g.boundaryString=f.boundaryString;var _=a.concat('Content-Disposition: form-data; name="contentDescription"\r\n\r\nuploaded-document'+s+a+'Content-Disposition: form-data; name="file"; filename="document.'+n+'"\r\nContent-Type: '+i+"\r\nContent-transfer-encoding: base64\r\n\r\n",e,"\r\n"+f.dash_boundary+"--\r\n");g.onTimeout=function(){o.report(p.onUploadError,o.serverNotResponding,{handlerUrl:p.handlerUrl,timeout:g.timeout}),p.eventBindObject.trigger("onUploadCompleted",{success:!1,responseStatus:598,response:o.serverNotResponding})},g.send(_)}function d(e){return"string"==typeof e||"number"==typeof e?e:JSON.stringify(e)}function u(e,t){var n;try{n=i.parseJSON(e)}catch(e){n="parseJSON: "+e.message}200===t?p.eventBindObject&&p.eventBindObject.trigger("onUploadCompleted",{success:!0,documentFilename:n.filename,response:n}):(o.report(p.onUploadError,o.uploadError,{responseStatus:t,response:n,handlerUrl:p.handlerUrl}),p.eventBindObject&&p.eventBindObject.trigger("onUploadCompleted",{success:!1,responseStatus:t,response:n}))}var p={},f=this;this.boundaryString="AaBbCc_X30",this.dash_boundary="--AaBbCc_X30",this.initialize=e,this.isInitialized=t,this.dispose=n,this.getUploadCallback=s,this.uploadToServer=c};e.exports=new a},function(e,t,n){var i=n(3);e.exports=function(){if(window.XDomainRequest){var e={NextId:0};i.ajaxTransport(function(t){if(t.crossDomain&&t.async){t.timeout&&(t.xdrTimeout=t.timeout,delete t.timeout);var n,o,r=e;return{send:function(e,a){function s(e,t,s,l){n.onload=n.onerror=n.ontimeout=i.noop,n=void 0,delete r[o],a(e,t,s,l)}n=new XDomainRequest,o=(++r.NextId).toString(),r[o]=n,n.open(t.type,t.url),n.timeout=t.xdrTimeout||Number.MAX_VALUE,n.onprogress=function(){},n.onload=function(){s(200,"OK",{text:n.responseText},"Content-Type: "+n.contentType)},n.onerror=function(){s(500,"Not Found")},n.ontimeout=function(){s(0,"timeout")},setTimeout(function(){n.send(t.hasContent&&t.data||null)},0)},abort:function(){n&&(delete r[o],n.onerror=i.noop,n.abort())}}}})}}()},function(e,t,n){"use strict";var i=n(3),o=n(6);e.exports={__resetFields:function(){this._params={},this.contentType="",this.contentTypeDescriptionName="",this.contentTypeDescription={},this.contentTypeDescriptionArray=[],this.documentFilename="",this.currentImportId="",this.currentStatus="",this.loosePages=!1,this.loosePageDisplayName="",this.indexFieldsForDocumentClass={},this.indexFieldsForDocumentClassArray=[],this.indexFieldValuesForDisplay={},this.batchFieldValuesForDisplayList={},this.batchFieldArray=[],this.fieldValuesForImport={},this.customValidationCollection={}},__getContentTypeDocs:function(e){var t=this;this.getContentTypeDescription(e,function(n){var o=i(".atala-content-type-document-list")[0];if(o){for(;o.length>0;)o.remove(0);if(void 0!==t._params.removedContentTypeDescriptions){var r=t.__filterContentTypeDescriptionList(n,t._params.removedContentTypeDescriptions);t.__buildContentTypeDescriptionDropDown(t,e,r,o)}else t.__buildContentTypeDescriptionDropDown(t,e,n,o);void 0!==t._params.onContentTypeDescriptionsCreated&&t._params.onContentTypeDescriptionsCreated()}},function(e,n){t._params.onError(e,{statusText:n.xhr.statusText})})},__filterContentTypeDescriptionList:function(e,t){for(var n=[],o=t.split(","),r=0;r<o.length;r++)o[r]=i.trim(o[r]);for(var a=0;a<e.length;a++)this.__inArray(e[a].documentClass,o)===-1&&n.push(e[a]);return n},__buildContentTypeDescriptionDropDown:function(e,t,n,o){e.contentTypeDescriptionArray=n,e.contentTypeDescription=n[0];for(var r in n){var a=new Option(n[r].documentClass);o.add(a)}if(e.loosePages===!0)if(void 0!==e._params.displayedLoosePagesForContentType){for(var s=e._params.displayedLoosePagesForContentType.split(","),l=0;l<s.length;l++)s[l]=i.trim(s[l]);this.__inArray(t,s)!==-1&&e.__addLoosePageOption(o,e.loosePageDisplayName)}else e.__addLoosePageOption(o,e.loosePageDisplayName);(i(".atala-indexfield-list").length>0||i(".atala-batchfield-list").length>0)&&e.__getIndexAndBatchFields(e.contentType,e.contentTypeDescription)},__addLoosePageOption:function(e,t){var n;n=void 0===t?new Option(""):new Option(t),e.add(n)},__getContentTypeDocsWithNoUI:function(e,t){var n=this;n.contentTypeDescriptionName=t,this.getContentTypeDescription(e,function(e){n.contentTypeDescriptionArray=e;for(var t in e)e[t].documentClass===n.contentTypeDescriptionName&&(n.contentTypeDescription=e[t])},function(e,t){n._params.onError(e,{statusText:t.xhr.statusText})})},__getIndexAndBatchFields:function(e,t){var n,o=this,r="";if(void 0!==t){var a=t.documentClass,s=[],l=this.__inArray(" / ",a);l!==-1?(s=a.split(" / "),r=s[0]):r=a}if(""===this._params.displayedIndexFields||void 0===this._params.displayedIndexFields)o.indexFieldsForDocumentClass="";else{var c=this._params.displayedIndexFields.split(",");for(n=0;n<c.length;n++)c[n]=i.trim(c[n]);o.indexFieldsForDocumentClass=c}void 0!==t?(i(".atala-batchfield-list").length>0&&o.__buildBatchFieldTable(o._params.displayedBatchFields,e,!0),this.getIndexFieldsForDocumentClass(e,r,function(e){i(".atala-indexfield-list").length>0&&(0===i("#atala-indexfield-table tr").length&&void 0===i("#atala-indexfield-table")||i("#atala-indexfield-table").remove(),i("<table id=atala-indexfield-table></table>").appendTo(".atala-indexfield-list"),o.indexFieldsForDocumentClassArray=e,""===o.indexFieldsForDocumentClass||void 0===o.indexFieldsForDocumentClass?o.__drawIndexFieldTable(e,!0):o.__drawIndexFieldTable(e,!1),void 0!==o._params.onIndexFieldsCompleted&&o._params.onIndexFieldsCompleted(!0))},function(e){o._params.onError(e,{statusText:e.xhr.statusText})})):o.__buildBatchFieldTable(o._params.displayedBatchFields,e,!1)},__drawIndexFieldTable:function(e,t){for(var n=this,o=0;o<e.length;o++){var r="",a=e[o].indexField.split(" / "),s=a[1].split(" ^ "),l=s[1],c=s[2];if("true"===l&&(r=' class="atala-indexfield-required"'),"true"===c&&(r=' class="atala-field-hidden"'),t||this.__inArray(a[0],n.indexFieldsForDocumentClass)!==-1){var d=n.__replaceWhiteSpace(a[0])+"_indexFieldInputId";i("<tr><td><label"+r+" for='"+d+"'>"+a[0]+"</label></td><td><input type='text' "+r+" id='"+d+"' /></td></tr>").appendTo("#atala-indexfield-table")}void 0!==n._params.onIndexFieldCompleted&&n._params.onIndexFieldCompleted(a[0])}},__buildBatchFieldTable:function(e,t,n){var o=this;if(""===e||void 0===e)o.batchFieldValuesForDisplayList="";else{for(var r=this._params.displayedBatchFields.split(","),a=0;a<r.length;a++)r[a]=i.trim(r[a]);o.batchFieldValuesForDisplayList=r}n?o.getBatchFields(t,function(e){0===i("#atala-batchfield-table tr").length&&void 0===i("#atala-batchfield-table")||i("#atala-batchfield-table").remove(),o.batchFieldArray=e,i("<table id=atala-batchfield-table></table>").appendTo(".atala-batchfield-list"),void 0===o._params.displayedBatchFields||""===o._params.displayedBatchFields?o.__drawBatchFieldRow(e,!0):o.__drawBatchFieldRow(e,!1),void 0!==o._params.onBatchFieldsCompleted&&o._params.onBatchFieldsCompleted(!0)},function(e){o._params.onError(e,{statusText:e.xhr.statusText})}):o.getBatchFields(t,function(e){o.batchFieldArray=e;i(".atala-batchfield-list").length>0&&(0===i("#atala-indexfield-table tr").length&&void 0===i("#atala-indexfield-table")||i("#atala-indexfield-table").remove()),i(".atala-indexfield-list").length>0&&0===i(".atala-batchfield-list").length&&(0===i("#atala-indexfield-table tr").length&&void 0===i("#atala-indexfield-table")||i("#atala-indexfield-table").remove(),i("<table id=atala-indexfield-table></table>").appendTo(".atala-indexfield-list"),""===o.batchFieldValuesForDisplayList||void 0===o.batchFieldValuesForDisplayList?o.__drawBatchFieldRow(e,!0):o.__drawBatchFieldRow(e,!1)),void 0!==o._params.onBatchFieldsCompleted&&o._params.onBatchFieldsCompleted(!0)},function(e){o._params.onError(e,{statusTest:e.xhr.statusText})})},__drawBatchFieldRow:function(e,t){for(var n=this,o=0;o<e.length;o++){var r="",a=e[o].batchField.split(" / "),s=a[1].split(" ^ "),l=s[1],c=s[2];if("true"===l&&(r=' class="atala-indexfield-required"'),"true"===c&&(r=' class="atala-field-hidden"'),t||this.__inArray(a[0],n.batchFieldValuesForDisplayList)!==-1){var d=n.__replaceWhiteSpace(a[0])+"_batchFieldInputId",u="<tr><td><label"+r+" for='"+d+"'>"+a[0]+"</label></td><td><input type='text' "+r+" id='"+d+"'/></td></tr>";i(".atala-batchfield-list").length>0?i(u).appendTo("#atala-batchfield-table"):i(u).appendTo("#atala-indexfield-table"),void 0!==n._params.onBatchFieldCompleted&&n._params.onBatchFieldCompleted(a[0])}}},__replaceWhiteSpace:function(e){return e.replace(/\s/g,"_")},__inArray:function(e,t,n){var i,o=Array.prototype.indexOf;if(t){if(o)return o.call(t,e,n);for(i=t.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(t[n]===e)return n}return-1},__setCurrentImportId:function(e){this.currentImportId=e},__scrapeFieldValues:function(e,t,n){var o,r,a,s,l,c=[];if(void 0===e)return c;for(var d=0;d<e.length;d++)o=t?e[d].batchField.split(" / "):e[d].indexField.split(" / "),r=o[0],a=t?i("#"+n.__replaceWhiteSpace(r)+"_batchFieldInputId").val():i("#"+n.__replaceWhiteSpace(r)+"_indexFieldInputId").val(),s=o[1].split(" ^ "),l=void 0!==a&&""!==a,l||(a=""),t?(r="batchField_"+r,n.fieldValuesForImport[r]=encodeURIComponent(a)):(r="indexField_"+r,n.fieldValuesForImport[r]=encodeURIComponent(a)),"true"!==s[1]||l?c.push(!1):c.push(!0),n.customValidationCollection[r]={},n.customValidationCollection[r].name=r,n.customValidationCollection[r].value=a,n.customValidationCollection[r].fieldType=s[0],n.customValidationCollection[r].required=s[1];return t?void 0!==n._params.onBatchFieldTypeValidationStatus&&n._params.onBatchFieldTypeValidationStatus(n.customValidationCollection):void 0!==n._params.onIndexFieldTypeValidationStatus&&n._params.onIndexFieldTypeValidationStatus(n.customValidationCollection),c},__getFieldListValuesForImport:function(e,t){var n=this,i=[];return void 0!==e&&e.length>0&&i.push(n.__scrapeFieldValues(e,!1,n)),void 0!==t&&t.length>0&&i.push(n.__scrapeFieldValues(t,!0,n)),i},__checkIndexFieldValidationResults:function(e){for(var t,n=0;n<e.length;n++)for(t=0;t<e[n].length;t++)if(e[n][t]===!0)return!1;return!0},__setIndexFieldsWithNoUi:function(e){var t=this,n=e.split(",");if(1===n.length)n[0]=i.trim(n[0]);else for(var o=0;o<n.length;o++)n[o]=i.trim(n[o]);for(var r=0;r<n.length;r++){var a=n[r].split(":");t.fieldValuesForImport["indexField_"+a[0]]=encodeURIComponent(a[1])}},__setBatchFieldsWithNoUi:function(e){var t,n=this,o=e.split(",");for(t=0;t<o.length;t++)o[t]=i.trim(o[t]);for(t=0;t<o.length;t++){var r=o[t].split(":");n.fieldValuesForImport["batchField_"+r[0]]=encodeURIComponent(r[1])}},__setLoosePages:function(e){var t=e.split(",");"true"===t[0]&&(this.loosePages=!0),2===t.length&&(this.loosePageDisplayName=i.trim(t[1]))},__buildContentTypeList:function(e,t,n){for(var i in t){var o=new Option(t[i]);e.add(o)}void 0!==n._params.onContentTypesCreated&&n._params.onContentTypesCreated()},__filterContentTypes:function(e,t,n){var o=[],r=[];void 0!==n&&o.push(n);var a;if(void 0!==t){r=t.split(",");for(var s=0;s<r.length;s++)r[s]=i.trim(r[s]);for(a=0;a<e.length;a++)this.__inArray(e[a],r)===-1&&o.push(e[a])}else for(a=0;a<e.length;a++)e[a]!==n&&o.push(e[a]);return o},__beforeImporting:function(e){var t=!0;return void 0!==e._params.onBeforeImport&&(t=e._params.onBeforeImport()),t},isInitialized:function(){return this._params&&this._params.handlerUrl},initialize:function(e){this.__resetFields(),this._params=e;var t=this,n=[],r=!1;if(void 0!==i(".atala-content-type-list")[0])this.getContentTypeList(function(e){void 0!==t._params.loosePages&&t.__setLoosePages(t._params.loosePages);var a=i(".atala-content-type-list")[0];if(void 0!==t._params.removedContentTypes||void 0!==t._params.defaultContentType){var s=t.__filterContentTypes(e,t._params.removedContentTypes,t._params.defaultContentType);t.__buildContentTypeList(a,s,t),t.contentType=s[0]}else t.__buildContentTypeList(a,e,t),t.contentType=e[0];t.__getContentTypeDocs(t.contentType),i(".atala-content-type-list").change(function(){t.contentType=i(".atala-content-type-list option:selected").text(),t.__getContentTypeDocs(t.contentType)}),i(".atala-content-type-document-list").change(function(){t.contentTypeDescription=t.contentTypeDescriptionArray[i(".atala-content-type-document-list")[0].selectedIndex],void 0!==i(".atala-indexfield-list")&&t.__getIndexAndBatchFields(t.contentType,t.contentTypeDescription)}),i(".atala-import-button").click(function(){t.importDocument(t.documentFilename,t.contentType,t.contentTypeDescription,t._params.onImportCompleted,t._params.onError)}),i(".atala-import-index-field-button").click(function(){void 0!==t.contentTypeDescription?(n=t.__getFieldListValuesForImport(t.indexFieldsForDocumentClassArray,t.batchFieldArray),r=t.__checkIndexFieldValidationResults(n),r===!0?t.importIndexFieldDocument(t.documentFilename,t.contentType,t.contentTypeDescription,t.fieldValuesForImport,t._params.onImportCompleted,t._params.onError):t._params.onError(o.fieldValidationError,t.customValidationCollection)):(n=t.__getFieldListValuesForImport(void 0,t.batchFieldArray),r=t.__checkIndexFieldValidationResults(n),r===!0?t.importLoosePageDocument(t.documentFilename,t.contentType,t.fieldValuesForImport,t._params.onImportCompleted,t._params.onError):t._params.onError(o.indexFieldValidationError,t.customValidationCollection))}),i(".atala-track-import-button").click(function(){t.trackImportStatus(t.currentImportId,t._params.onTrackStatusReceived)})},function(e,n){t._params.onError(e,{statusText:n.xhr.statusText+(n.xhr.responseText.indexOf("LicenseException")!=-1?" - Licensing":"")})});else{void 0!==i(".atala-content-type-list")[0]&&i(".atala-content-type-list").change(function(){t.contentType=i(".atala-content-type-list option:selected").text(),t.__getContentTypeDocs(t.contentType)}),void 0!==i(".atala-content-type-document-list")[0]&&i(".atala-content-type-document-list").change(function(){t.contentTypeDescription=t.contentTypeDescriptionArray[t.contentType],t.__getIndexAndBatchFields(t.contentType,t.contentTypeDescription)}),void 0!==t._params.contentType&&void 0!==t._params.contentTypeDescriptionName&&t.__getContentTypeDocsWithNoUI(t._params.contentType,t._params.contentTypeDescriptionName),void 0!==t._params.contentType&&t.__getContentTypeDocs(t._params.contentType);var a=[];void 0!==i(".atala-indexfield-list")[0]&&void 0!==t._params.contentType?void 0!==t._params.contentTypeDescriptionName?(a.documentClass=t._params.contentTypeDescriptionName,t.__getIndexAndBatchFields(t._params.contentType,a)):t.__getIndexAndBatchFields(t._params.contentType,void 0):(void 0!==t._params.contentTypeDescriptionName&&(a.documentClass=t._params.contentTypeDescriptionName,void 0!==t._params.indexFields&&t.__setIndexFieldsWithNoUi(t._params.indexFields)),void 0!==t._params.batchFields&&t.__setBatchFieldsWithNoUi(t._params.batchFields)),i(".atala-import-button").click(function(){t.importDocument(t.documentFilename,t._params.contentType,t.contentTypeDescription,t._params.onImportCompleted,t._params.onError)}),i(".atala-import-index-field-button").click(function(){var e=!1;if(void 0===i(".atala-indexfield-list")[0]?void 0!==t._params.indexFields?t.__setIndexFieldsWithNoUi(t._params.indexFields):void 0!==t._params.batchFields&&t.__setBatchFieldsWithNoUi(t._params.batchFields):void 0!==t._params.contentTypeDescriptionName?(n=t.__getFieldListValuesForImport(t.indexFieldsForDocumentClassArray),e=!0):n=t.__getFieldListValuesForImport(void 0,t.batchFieldArray),r=void 0===i(".atala-indexfield-list")[0]||t.__checkIndexFieldValidationResults(n),r===!0)if(void 0!==t._params.contentTypeDescriptionName){var a=[];a.documentClass=t._params.contentTypeDescriptionName,t.importIndexFieldDocument(t.documentFilename,t._params.contentType,a,t.fieldValuesForImport,t._params.onImportCompleted,t._params.onError)}else t.importLoosePageDocument(t.documentFilename,t._params.contentType,t.fieldValuesForImport,t._params.onImportCompleted,t._params.onError);else e===!0?t._params.onIndexFieldImportValidationError(o.indexFieldValidationError,n.length>0?n[0]:[]):t._params.onBatchFieldImportValidationError(o.batchFieldValidationError,n.length>1?n[1]:n.length>0?n[0]:[])}),i(".atala-track-import-button, .atala-import-button").click(function(){t.trackImportStatus(t.currentImportId,t._params.onTrackStatusReceived)})}},dispose:function(){i(".atala-content-type-list, .atala-content-type-document-list").each(function(e,t){i(t).empty().off("change")}),i(".atala-import-index-field-button, .atala-track-import-button").each(function(e,t){i(t).off("click")}),i(".atala-batchfield-list, .atala-indexfield-list").each(function(e,t){i(t).empty()}),this.__resetFields()},setBatchFieldValues:function(e){var t=this;e.length>0&&void 0!==e&&t.__setBatchFieldsWithNoUi(e)},setIndexFieldValues:function(e){var t=this;e.length>0&&void 0!==e&&t.__setIndexFieldsWithNoUi(e)},importDocument:function(e,t,n,r,a){var s,l=this,c="";void 0!==n&&(c=n.documentClass),l.__beforeImporting(l)&&(s={url:this._params.handlerUrl+"?cmd=importDocument",type:"POST",data:{filename:e,contentType:t,contentTypeDocumentClass:c,contentTypeDescription:JSON.stringify(n)},dataType:"json",success:function(e,t){"true"===e.success?(r(e,e.id,e.status,t),l.__setCurrentImportId(e.id)):a(o.importError,{message:e.errorMessage,xhr:t})},error:function(e,t){a(o.importError,{message:t,xhr:e})}},i.ajax(s))},importIndexFieldDocument:function(e,t,n,r,a,s){var l=this;if(l.__beforeImporting(l)){var c={url:this._params.handlerUrl+"?cmd=importDocumentWithIndexFields",type:"POST",data:{filename:e,contentType:t,contentTypeDocumentClass:n.documentClass,contentTypeDescription:JSON.stringify(n),indexFields:JSON.stringify(r)},dataType:"json",success:function(e,t,n){"true"===e.success?(a(e,e.id,e.status,n),l.__setCurrentImportId(e.id)):s(o.importError,{message:e.errorMessage,xhr:n})},error:function(e,t){s(o.importError,{message:t,xhr:e})}};i.ajax(c)}},importLoosePageDocument:function(e,t,n,r,a){var s=this;if(s.__beforeImporting(s)){var l={url:this._params.handlerUrl+"?cmd=importDocumentWithIndexFields",type:"POST",data:{filename:e,contentType:t,indexFields:JSON.stringify(n)},dataType:"json",success:function(e,t){"true"===e.success?(r(e,e.id,e.status,t),s.__setCurrentImportId(e.id)):a(e.errorMessage,t)},error:function(e){a(o.importError,{xhr:e})}};i.ajax(l)}},trackImportStatus:function(e,t){i.get(this._params.handlerUrl+"?cmd=trackImportStatus&importId="+encodeURIComponent(e),{},function(e){t(e.status)})},getContentTypeList:function(e,t){i.getJSON(this._params.handlerUrl+"?cmd=getContentTypeList",{},function(t){e(t)}).fail(function(e){t(o.contentTypesError,{xhr:e})})},getContentTypeDescription:function(e,t,n){i.getJSON(this._params.handlerUrl+"?cmd=getContentTypeDescription&contentType="+e,{},function(e){t(e)}).fail(function(e){n(o.contentDescError,{xhr:e})})},getIndexFieldsForDocumentClass:function(e,t,n,r){i.getJSON(this._params.handlerUrl+"?cmd=indexFieldsForDocumentClass&contentType="+e+"&documentClass="+t,{},function(e){n(e)}).fail(function(e){r(o.docClassIndexFieldError,{xhr:e})})},getBatchFields:function(e,t,n){i.getJSON(this._params.handlerUrl+"?cmd=getBatchFields&contentType="+e,{},function(e){t(e)}).fail(function(e){n(o.batchFieldsError,{xhr:e})})}}}]);