var Atalasoft=function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};n[e].call(t.exports,t,t.exports,o);t.l=!0;return t.exports}o.m=n;o.c=i;o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})};o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};o.t=function(t,e){1&e&&(t=o(t));if(8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);o.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:t});if(2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n};o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};o.d(t,"a",t);return t};o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};o.p="";return o(o.s=10)}([function(e,t){e.exports=jQuery},function(o,e,t){"use strict";function n(e,t,n){var i=window.console;return function(){(n||t)&&i&&i[e]&&"function"==typeof i[e]&&i[e].apply(i,arguments);return o.exports}}var i,r={},a=n("group",!0),s=n("groupEnd",!0),l=n("time",!0),c=n("timeEnd",!0),d=(i=0,function(){return"Time Sequence "+(i+=1)});o.exports=new function(){this.TraceEnabled=!1;var i=this;return{error:n("error",i.TraceEnabled,!0),warn:n("warn",i.TraceEnabled,!0),log:n("log",i.TraceEnabled),info:n("info",i.TraceEnabled),object:n("dir",i.TraceEnabled),debug:n("debug",i.TraceEnabled),deprecate:function(e,t){if(!r[e]){r[e]=t;this.warn("'%s' is deprecated. Please use '%s' instead.",e,t)}},scope:function(){var e=Array.prototype.slice.call(arguments),t=e.pop();if(i.TraceEnabled){var n=d();a.apply(this,e);l(n);try{t()}finally{c(n);s()}}else t()},enable:function(){i.TraceEnabled=!0}}}},function(e,t,n){"use strict";var i=n(0),o={report:function(e,t,n){e?e(t,n):i.error(t)},ajax:"Could not create an XMLHttpRequest object needed for uploading.",badBrowser:"Scanning requires Chrome, FireFox, or Edge running on Windows, or Safari running on macOS",badVrsLicense:"VRS license is missing or invalid.",licensingError:"The server did not return valid licensing information.",vrsBadCommand:"eVRS command string is invalid.",batchFieldValidationError:"Batch field validation failed.",indexFieldValidationError:"IndexField validation failed.",fieldValidationError:"Batch, or index field validation failed.",batchFieldsError:"The server could not retrieve the batch fields for the selected batch class.",contentTypesError:"The server could not retrieve content types.",contentDescError:"The server could not retrieve the content description.",docClassIndexFieldError:"The server could not retrieve the index fields for the document class.",doorOpen:"Scanner reports cover open.",doubleFeed:"Scanner reports a double-feed.",driverCrash:"Fatal exception in scanner driver.",dsmFail:"Failure in TWAIN Manager.",dsOpen:"Failed to open scanner.",fileFail:"File not found or cannot be written or cannot be read.",fileLocked:"File locked by other application.",helperDll:"Failed to load scanning service helper DLL.",importError:"The server could not import the document.",internalError:"Unexpected internal error.",noPlugin:"The scanning service needs to be installed. If it is installed it may need to be enabled.",noTwain:"The TWAIN Manager needs to be installed.",oldPlugin:"The scanning service needs to be updated to a newer version.",oldWindowsService:"The scanning service needs to be updated to a newer version. Contact your administrator for assistance.",outOfMemory:"Insufficient memory to complete an operation. Restarting the Scanning Service may help.",paperJam:"Scanner reports a paper jam.",scanFail:"Unable to start scan.",serverNotResponding:"The server is not responding.",tooManyImages:"Too many images for Scanning service to handle.",unsupportedFormatWarning:"Warning: Only the following image file types are supported for import: BMP, GIF, JPG/JPEG, PDF, TIFF. All other file types will be ignored and will not be imported.",uploadError:"The server reported an error while uploading.",userCancel:"",vrsBadDpiWarning:"Warning: One or more images were skipped - Image Enhancement requires image DPI > 25",xferFail:"Image transfer from scanner failed.",webServiceMissed:"Web Capture local service is not running.",lowIntegrityAccessDenied:"Access to the Web Capture Service is denied because the current user has insufficient rights. This can have happened if you have visited site with the untrusted certificate or connect to the Web Capture Service from internet. Contact your administrator for assistance.",brokenConnection:"Connection to the scanning service is broken. You may need to refresh the page to restore it.",feederEmpty:"Document feeder is empty."};e.exports=o},function(e,t,n){var i=n(1),r=n(0),a=!1,s={};function l(e,t,n){i.scope(e,t,function(){i.log("Body: ").object(n)})}e.exports={get:function(e,t,n){l("GET",e,t);return r.ajax({url:e,cache:!1,data:t,type:"GET",async:void 0===n||n||a,global:!1})},post:function(e,t,n){l("POST",e,t);return r.ajax({url:e,cache:!1,data:JSON.stringify(t||{}),contentType:"application/json",dataType:"json",type:"POST",async:void 0===n||n||a,global:!1})},put:function(e,t,n){var i=a?"POST":"PUT",o=a?e+"?debugMethod=PUT":e;l(i,o,t);return r.ajax({url:o,cache:!1,data:JSON.stringify(t||{}),contentType:"application/json",dataType:"json",type:i,async:void 0===n||n||a,global:!1})},del:function(e,t,n){var i=a?"POST":"DELETE",o=a?e+"?debugMethod=DELETE":e;l(i,o,t);return r.ajax({url:o,cache:!1,data:JSON.stringify(t||{}),type:i,async:void 0===n||n||a,global:!1})},poll:function(t,n,i){var o=this;r.ajax({url:t,type:"POST",cache:!1,dataType:"text",timeout:3e4,global:!1,success:function(e){e=e?JSON.parse(e):{};n(e)&&o.poll(t,n,i)},error:function(e){i(e)&&setTimeout(function(){o.poll(t,n,i)},1e3)}})},callDeferred:function(e,t,n,i){var o,r=(o=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(o+16*Math.random())%16|0;o=Math.floor(o/16);return("x"===e?t:7&t|8).toString(16)}));(n=n||{}).callbackId=r;return e(t,n).done(function(){s[r]=i})},executeDeferredCallback:function(e){if(s[e]){var t=Array.prototype.slice.call(arguments,1);s[e].apply(this,t);delete s[e]}},releaseDeffered:function(){s={}},setLimitedMode:function(e){i.log("Setting limited mode: ",e);a=void 0!==e&&e},isLimitedMode:function(){return a},beacon:function(e,t){var n=r.Deferred();navigator.sendBeacon(e,t)?n.resolve():n.reject();return n}}},function(e,t){e.exports=[11,4,0,458]},function(e,t){e.exports=function(){var e={name:""},n=navigator.userAgent||"";function t(e){var t=n.match(e);return t&&1<t.length&&t[1]||""}/Opera\W|\sOPR\W/.test(n)?e={name:"Opera",opera:!0,version:parseFloat(t(/(?:.*Version\W|Opera\W|\sOPR\W)(\d+\.\d+)/))}:/msie|trident/i.test(n)?e={name:"Internet Explorer",msie:!0,version:parseFloat(t(/(?:msie |rv:)(\d+\.\d+)/i))}:/chrome/i.test(n)?e={name:"Chrome",chrome:!0,version:parseFloat(t(/(?:chrome|crios|crmo)\/(\d+\.\d+)/i))}:/firefox|iceweasel/i.test(n)?e={name:"Firefox",firefox:!0,version:parseFloat(t(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i))}:/safari/i.test(n)&&(e={name:"Safari",safari:!0,version:parseFloat(t(/Version\W(\d+\.\d+)/i))});"MacIntel"===navigator.platform?e.system="MacOS":e.system="Win32";e.supportsBeaconApi=!(e.msie||e.safari&e.version<11.1);return e}()},function(e,t,n){"use strict";var a=n(1),s=n(3),l=n(0),i=function(e){this.patchCode=e.patchCode||"";this.PatchCode=this.patchCode;this.barcodes=e.barcodes||[];this.Barcodes=this.barcodes;this.imprintedText=e.imprintedText||"";this.ImprintedText=this.imprintedText;this.Filename=e.filename;this.localFile=e.localFile||"";this.localFileChunks=e.localFileChunks;this.originalImage=e.originalImage;this.discard=!1;this.eDoc=e.eDoc;this.path=e.path;if(e.eDoc)this.filename=this.Filename=e.filename;else{this.bitsPerPixel=e.bitsPerPixel||-1;this.BitsPerPixel=this.bitsPerPixel;this.pixelType=e.pixelType||-1;this.PixelType=this.pixelType;this.width=e.width||0;this.Width=this.width;this.height=e.height||0;this.Height=this.height;this.xdpi=e.xdpi||-1;this.XResolution=this.xdpi;this.ydpi=e.ydpi||-1;this.YResolution=this.ydpi;this.dpi=[this.xdpi,this.ydpi];this.PageSide=e.pageSide;"front"in e&&(this.front=e.front);this.SheetNo=e.sheetNo;"sheetNo"in e&&(this.sheetNo=e.sheetNo);"newSheet"in e&&(this.newSheet=e.newSheet)}};function c(i){return function(e,t,n){i.reject();a.warn("Status:",t,"Error:",n)}}function o(t,n,i){var o=l.Deferred(),r=this;a.scope("Image.asBase64String",t,function(){a.info("Options:").object(n);if(r.id&&r.selfUrl){var e={jpegCompression:n?n.jpegCompression:void 0,quality:n?n.quality:void 0,format:t||(n?n.format:void 0),width:r.width,height:r.height};s.get(r.selfUrl,e,i).done(function(e){r.updateData(e);o.resolve(e.base64)}).fail(c(o))}else{a.warn("attempting to call asBase64String on empty object.");o.reject()}});return o}function r(t,n,i){var o=l.Deferred(),r=this;a.scope("Image.saveEncryptedLocal",t,function(){a.info("Options:").object(n);if(r.id&&r.selfUrl){var e={format:t||(n?n.format:void 0),jpegCompression:n?n.jpegCompression:void 0,quality:n?n.quality:void 0,width:r.width,height:r.height};s.put(r.selfUrl,e,i).done(function(e){r.localFile=e.id;o.resolve(e.id)}).fail(c(o))}else{a.warn("attempting to call saveEncryptedLocal on empty object.");o.reject()}});return o}function d(e,t){var n=t||null;e.done(function(e){n=e});return n}function u(e,t){var n=this;e.done(function(e){t.call(n,e)}).fail(function(){t.call(n)})}var p={asBase64String:function(e,t){return d.call(this,o.call(this,e,t,!1))},saveEncryptedLocal:function(e,t){return d.call(this,r.call(this,e,t,!1))}},f={asBase64String:function(e,t,n){u.call(this,o.call(this,t,n,!0),e)},saveEncryptedLocal:function(e,t,n){u.call(this,r.call(this,t,n,!0),e)}},h=function(e,t,n){this.id=t;i.call(this,n=n||{});this.selfUrl=n.self;this.alternatives=n.alternatives;this.thumbUrl=n.thumb};h.prototype={updateData:function(e){i.call(this,e)},asBase64String:function(e,t){var n=Array.prototype.slice.call(arguments);if("function"!=typeof n.slice(-1).pop()){a.warn("Parameter 'callback' is not specified. The method 'asBase64String' will be run synchronously.");return p.asBase64String.apply(this,n)}n.unshift(n.pop());f.asBase64String.apply(this,n)},saveEncryptedLocal:function(e,t,n){var i=Array.prototype.slice.call(arguments);if("function"!=typeof(n=i.slice(-1).pop())){a.warn("Parameter 'callback' is not specified. The method 'saveEncryptedLocal' will be run synchronously.");return p.saveEncryptedLocal.apply(this,i)}i.unshift(i.pop());f.saveEncryptedLocal.apply(this,i)},clear:function(){if(this.id&&this.selfUrl)return s.del(this.selfUrl,{},!0).done(function(){this.selfUrl=null;this.alternativesUrl=null;this.id=null})},AsBase64String:function(){a.deprecate("AsBase64String","asBase64String");return this.asBase64String.apply(this,arguments)},SaveEncryptedLocalFile:function(){a.deprecate("SaveEncryptedLocalFile","saveEncryptedLocal");return this.saveEncryptedLocal.apply(this,arguments)}};e.exports=h},function(e,t,n){"use strict";e.exports={ScanMode:{Simplex:0,Duplex:1,Any:-1},FeederType:{Flatbed:0,Feeder:1,AutoSelect:2,Any:-1},Orientation:{Portrait:0,Landscape:1,Any:-1},PaperSize:{Any:-1,None:0,A4:1,JISB5:2,USLetter:3,USLegal:4,A5:5,ISOB4:6,ISOB6:7,USLedget:9,USExecutive:10,A3:11,ISOB3:12,A6:13,C4:14,C5:15,C6:16,FourA0:17,TwoA0:18,A0:19,A1:20,A2:21,A7:22,A8:23,A9:24,A10:25,ISOB0:26,ISOB1:27,ISOB2:28,ISOB5:29,ISOB7:30,ISOB8:31,ISOB9:32,ISOB10:33,JISB0:34,JISB1:35,JISB2:36,JISB3:37,JISB4:38,JISB6:39,JISB7:40,JISB8:41,JISB9:42,JISB10:43,C0:44,C1:45,C2:46,C3:47,C7:48,C8:49,C9:50,C10:51,USStatement:52,Businesscard:53},ImprinterTypes:{ImprinterBefore:"ImprinterBefore",ImprinterAfter:"ImprinterAfter",ImprinterBottomBefore:"ImprinterBottomBefore",ImprinterBottomAfter:"ImprinterBottomAfter",EndorserBefore:"EndorserBefore",EndorserAfter:"EndorserAfter",EndorserBottomBefore:"EndorserBottomBefore",EndorserBottomAfter:"EndorserBottomAfter"},ScanCompression:{Disable:0,Enable:1,Auto:-1}}},function(e,t,n){"use strict";e.exports={Auto:-2,Any:-1,BW:0,Grayscale:1,Color:2,Indexed:3}},function(e,t,n){"use strict";var i=n(0),h=n(2),m=function(e,t,n){var i=this,o=e;this.callback=t||function(){};this.updating=!1;this.timeout=1e3*(Number(n.serverTimeout)||50);this.abort=function(){if(i.updating){i.updating=!1;i.xhr.abort();if(i._serverTimeoutToken){clearTimeout(i._serverTimeoutToken);delete i._serverTimeoutToken}i.xhr=null}};this.__onTimeout=function(){i.abort();i.onTimeout&&i.onTimeout()};this.send=function(e){if(i.updating)return!1;i.xhr=null;window.XMLHttpRequest&&(i.xhr=new XMLHttpRequest);if(null===i.xhr){h.report(n.onUploadError,h.ajax);return!1}i.xhr.onreadystatechange=function(){if(4===i.xhr.readyState){i.updating=!1;if(i._serverTimeoutToken){clearTimeout(i._serverTimeoutToken);delete i._serverTimeoutToken}try{i.callback(i.xhr.responseText,i.xhr.status,i.xhr.responseXML)}catch(e){}i.xhr=null}};i.updating=new Date;var t=o+"?"+i.updating.getTime();i.xhr.open("POST",t,!0);i.xhr.setRequestHeader("Content-Type","multipart/form-data; boundary="+i.boundaryString);i.onTimeout&&(i._serverTimeoutToken=setTimeout(i.__onTimeout,i.timeout));i.xhr.send(e);return!0}};e.exports=new function(){var p={},f=this;this.boundaryString="AaBbCc_X30";this.dash_boundary="--AaBbCc_X30";this.initialize=function(e){(p=e||{}).eventBindObject||(p.eventBindObject=i({}));t(!0)};this.isInitialized=function(){return p&&p.handlerUrl};this.dispose=function(){t(!1);p={}};this.getUploadCallback=function(){return function(e,t){n(e,t)}};this.uploadToServer=n;function t(e){var t=p.eventBindObject,n=e?t.bind:t.unbind;p.onUploadStarted&&n.call(t,"onUploadStarted",e?{}:p.onUploadStarted,p.onUploadStarted);p.onUploadCompleted&&n.call(t,"onUploadCompleted",e?{}:p.onUploadCompleted,p.onUploadCompleted)}function n(e,t){p.eventBindObject.trigger("onUploadStarted",{});var n=function(e){switch(e.substr(0,5)){case"JVBER":return"pdf";case"/9j/4":return"jpg";case"R0lGO":return"gif";case"iVBOR":return"png";case"TU0AK":case"SUkqA":return"tif"}return"Qk"==e.substr(0,2)?"bmp":"bin"}(e),i={bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",pdf:"application/pdf",png:"image/png",tif:"image/tiff",bin:"application/octet-stream"}[n],o="\r\n"+f.dash_boundary+"\r\n";t||(t=p.uploadOptions||{});var r,a="";"string"==typeof p.uploadLocation&&0!==p.uploadLocation.length&&(a+=o+'Content-Disposition: form-data; name="uploadLocation"\r\n\r\n'+p.uploadLocation);if(t.formData)for(var s in t.formData)t.formData.hasOwnProperty(s)&&(a+=o+'Content-Disposition: form-data; name="'+s+'"\r\n\r\n'+("string"==typeof(r=t.formData[s])||"number"==typeof r?r:JSON.stringify(r)));if(t.extraParts){var l,c=t.extraParts;for(l=0;l<c.length;l++)a+=o+c[l]}var d=new m(p.handlerUrl,function(e,t,n){!function(e,t){var n;try{n=JSON.parse(e)}catch(e){n="JSON.parse: "+e.message}if(200===t)p.eventBindObject&&p.eventBindObject.trigger("onUploadCompleted",{success:!0,documentFilename:n.filename,response:n});else{h.report(p.onUploadError,h.uploadError,{responseStatus:t,response:n,handlerUrl:p.handlerUrl});p.eventBindObject&&p.eventBindObject.trigger("onUploadCompleted",{success:!1,responseStatus:t,response:n})}}(e,t)},p);d.boundary=f.dash_boundary;d.boundaryString=f.boundaryString;var u=o.concat('Content-Disposition: form-data; name="contentDescription"\r\n\r\nuploaded-document'+a+o+'Content-Disposition: form-data; name="file"; filename="document.'+n+'"\r\nContent-Type: '+i+"\r\nContent-transfer-encoding: base64\r\n\r\n",e,"\r\n"+f.dash_boundary+"--\r\n");d.onTimeout=function(){h.report(p.onUploadError,h.serverNotResponding,{handlerUrl:p.handlerUrl,timeout:d.timeout});p.eventBindObject.trigger("onUploadCompleted",{success:!1,responseStatus:598,response:h.serverNotResponding})};d.send(u)}}},function(e,t,n){"use strict";var i=n(4),o=n(11),r=n(19),a=n(2),s=n(8),l=n(1),c=n(9),d=n(7);function u(){return!!self.Atalasoft}var p=u()?self.Atalasoft.Controls:{},f=u()?self.Atalasoft.Utils:{},h=u()?self.Atalasoft.Annotations:{};p.Capture={Errors:a,PixelType:s,FeederType:d.FeederType,ScanMode:d.ScanMode,Orientation:d.Orientation,PaperSize:d.PaperSize,ImprinterTypes:d.ImprinterTypes,minVersion:i,WebScanning:o,UploadToCaptureServer:c,CaptureService:r};e.exports=u()?{Annotations:h,Controls:p,Logger:l,Utils:f}:{Controls:p,Logger:l}},function(e,t,n){"use strict";var i=n(0),o=n(5),r=n(12),a=n(9),s=n(2),l=n(1),c=n(4),d=(n(18),{_scanClient:null,scanningOptions:{},uploadOptions:{},LocalFile:null,isSupportedBrowser:!1}),u={};function p(){return!!y()}function f(e){void 0===e&&(e=d.scanningOptions);y().scan(e,a.getUploadCallback())}function h(e){void 0===e&&(e=d.scanningOptions);y().importFiles(e)}function m(e){y().setLicense(e,function(){y().enumerateScanners(function(){!function(){!function(e,t){if(0<e.length){t.click(function(){f()});t.removeAttr("disabled")}else t.attr("disabled",!0)}(y().scanners,i(".atala-scan-button"));!function(e){e.click(function(){h()});e.removeAttr("disabled")}(i(".atala-local-file-import-button"));!function(e,t,n){if(0<n.length){var i=n[0];if((i.length=0)<e.length){for(var o=0;o<e.length;o++){var r=document.createElement("option");r.text=e[o];r.value=e[o];i.add(r);r.text===t&&(i.selectedIndex=i.length-1)}i.onchange=function(){y().onScannerSelected(i.options[i.selectedIndex].value)};n.removeAttr("disabled")}else n.attr("disabled",!0)}else y().onScannerSelected(t)}(y().scanners,y().defaultScanner,i(".atala-scanner-list"))}();u.onScanClientReady&&y().isSupportedBrowser&&u.onScanClientReady()})})}function g(){return i("body")}function _(){i(".atala-scan-button, .atala-local-file-import-button").each(function(e,t){i(t).off("click").attr("disabled",!0)});i(".atala-scanner-list").each(function(e,t){i(this).attr("disabled",!0).empty();t.onchange=null})}function v(){if(y()){o.supportsBeaconApi||y().abortScan();if(u.onShutdown)try{u.onShutdown()}catch(e){}y().__shutdown(void 0,void 0,o.supportsBeaconApi)}}function y(){return d._scanClient}function b(e){d._scanClient=e}i.extend(d,{initialize:function(e){l.log("Atalasoft.Controls.Capture.WebScanning.initialize(...)");void 0!==(u=e).scanningOptions&&(d.scanningOptions=e.scanningOptions);void 0!==e.uploadOptions&&(d.uploadOptions=e.uploadOptions);!function(e,t){if(t)for(var n in e)e.hasOwnProperty(n)&&"string"==typeof e[n]&&n in t&&(e[n]=t[n])}(s,e.localization);if(!y()){b(r.getScanClient());y().initialize({onScanError:e.onScanError,onScanStarted:e.onScanStarted,onScanCompleted:e.onScanCompleted,onImageAcquired:e.onImageAcquired,onImageDiscarded:e.onImageDiscarded,onScanClientReady:function(){!function(){d.isSupportedBrowser=y().isSupportedBrowser;y().isSupportedBrowser&&(d.LocalFile={setEncryptionKey:function(e,t){y().setSymmetricEncryptionKey(e,t)},fromBase64String:function(e,t){return y().saveBase64ToEncryptedLocalFile(e,t)},asBase64String:function(e,t,n,i){return y().encryptedLocalFileAsBase64String.apply(y(),arguments)},splitToFiles:function(e,t,n){return y().splitToFiles.apply(y(),arguments)},remove:function(e,t){y().deleteLocalFile(e,t)},list:function(e){return y().listLocalFiles(e)},removeAll:function(e){y().removeAll(e)},globalPurgeByAge:function(e,t){y().globalPurgeByAge(e,t)}});if(u.license){m(u.license);delete u.license}else y().isSupportedBrowser&&i.getJSON(u.handlerUrl+"?cmd=getLicense",{},function(e){m(e)}).fail(function(e){s.report(u.onScanError,s.licensingError,e)})}()},eventBindObject:g(),localization:s,scanningOptions:d.scanningOptions,backwardCompatibilityMode:e.backwardCompatibilityMode});i(window).bind("beforeunload",v).bind("unload",v)}a.initialize({handlerUrl:e.handlerUrl,serverTimeout:e.serverTimeout,onUploadError:e.onUploadError,onUploadStarted:e.onUploadStarted,onUploadCompleted:e.onUploadCompleted,uploadLocation:e.uploadLocation,eventBindObject:g(),uploadOptions:d.uploadOptions})},isInitialized:p,dispose:function(e,t){if(this.isInitialized()){a.dispose();y()&&y().__shutdown(function(){b(null);d.LocalFile=null;i(window).unbind("beforeunload",v).unbind("unload",v);_();e&&e()},function(){_();t&&"function"==typeof t&&t.apply(null,arguments)},o.supportsBeaconApi)}else e&&e()},enumerateScanners:function(e){return y().enumerateScanners.apply(y(),arguments)},getSessionId:function(){var e=y();return e?e.getSessionId():""},getStoragePath:function(){var e=y();return e?e.getPersistentPath():""},scan:f,abortScan:function(){y().abortScan()},importFiles:h,showSettingsDialog:function(e,t){e||(e=d.scanningOptions);y().showSettingsDialog(e,t)},getSupportedValues:function(e,t){e||(e=d.scanningOptions);y().getSupportedValues(e,t)},getCurrentValues:function(e,t){e||(e=d.scanningOptions);y().getCurrentValues(e,t)},setBarcodeLicense:function(e){y().setBarcodeLicense(e)},getProfile:function(e){void 0===e&&(e=d.scanningOptions);return JSON.stringify(e)},setProfile:function(e){d.scanningOptions=JSON.parse(e)},getVersion:function(){var e=y();return e?e.getVersion():null},getScanStationName:function(){var e=y();return p()&&e?e.getScanStationName():null},setSymmetricEncryptionKey:function(e){l.deprecate("Atalasoft.Controls.Capture.WebScanning.setSymmetricEncryptionKey","Atalasoft.Controls.Capture.WebScanning.LocalFile.setEncryptionKey");y().setSymmetricEncryptionKey(e)},saveBase64ToEncryptedLocalFile:function(e){l.deprecate("Atalasoft.Controls.Capture.WebScanning.saveBase64ToEncryptedLocalFile","Atalasoft.Controls.Capture.WebScanning.LocalFile.fromBase64String");return y().saveBase64ToEncryptedLocalFile(e)},encryptedLocalFileAsBase64String:function(e,t,n){l.deprecate("Atalasoft.Controls.Capture.WebScanning.encryptedLocalFileAsBase64String","Atalasoft.Controls.Capture.WebScanning.LocalFile.asBase64String");return y().encryptedLocalFileAsBase64String(e,t,n)},deleteLocalFile:function(e){l.deprecate("Atalasoft.Controls.Capture.WebScanning.deleteLocalFile","Atalasoft.Controls.Capture.WebScanning.LocalFile.remove");y().deleteLocalFile(e)},listLocalFiles:function(){l.deprecate("Atalasoft.Controls.Capture.WebScanning.listLocalFiles","Atalasoft.Controls.Capture.WebScanning.LocalFile.list");return y().listLocalFiles()},getJSVersion:function(){return c},getInstallerFileName:function(){var e=y();return e?e.getInstallerFileName():null}});e.exports=d},function(e,t,n){"use strict";var i=n(5),o=n(4),r=n(2),a=n(13),s={_localization:{notWindows:"Platform is not Windows or macOS: ",ieVersion:"IE version not supported: ",notSupported:"Not currently supported: ",pluginVersion:"Plugin is version: ",minVersionNeeded:"minimum version needed: "},getScanClient:function(){if("Win"!==navigator.platform.substring(0,3)&&"Mac"!==navigator.platform.substring(0,3)){l._badBrowser=this._localization.notWindows+navigator.platform;return l}if(i.msie&&i.version<11){l._badBrowser=this._localization.ieVersion+i.version;return l}if(i.msie||i.firefox||i.chrome||i.safari)return a;l._badBrowser=this._localization.notSupported+(i.name||navigator.userAgent);return l}},l={abortScan:function(){},deleteLocalFile:function(e){},encryptedLocalFileAsBase64String:function(e,t,n){return null},getSupportedValues:function(e,t){t(null)},globalPurgeByAge:function(e){},importFiles:function(e){},initialize:function(e){e.onScanClientReady&&e.onScanClientReady();r.report(e.onScanError,r.badBrowser,this._badBrowser)},isInstalled:function(){return!0},isAppropriateForClient:function(){return!0},listLocalFiles:function(){return null},removeAll:function(){},saveBase64ToEncryptedLocalFile:function(e){return null},scan:function(e,t){},setBarcodeLicense:function(e){},setLicense:function(e){return!1},setSymmetricEncryptionKey:function(e){},getVersion:function(){return o.slice()},getScanStationName:function(){},showSettingsDialog:function(e,t){t({complete:!1})},__shutdown:function(e,t){},scanners:[],defaultScanner:"",isSupportedBrowser:!1,onScannerSelected:function(e){},_badBrowser:""};e.exports=s},function(e,t,n){"use strict";var o=n(0),a=n(1),r=n(4),f=n(2),s=n(3),h=n(14),l=n(16),i=n(7),c=n(8),d=n(17),u=n(5),p={SessionId:0,HostRunsAsService:!1,PersistentPath:"",ReadyState:1,TwainAvailable:!1,InstalledSources:[],DefaultSourceDevice:"",scanningOptions:{scanner:null,applyVRS:!0,evrsSettings:null,brightness:0,contrast:0,threshold:-1,showScannerUI:!1,showScannerUIWithCurrentSettings:!1,showProgress:!1,pixelType:c.Any,resultPixelType:c.Any,duplex:i.ScanMode.Simplex,dpi:200,feeder:i.FeederType.Any,paperSize:i.PaperSize.USLetter,orientation:i.Orientation.Any,scanCompression:i.ScanCompression.Auto,disableVRSIfInstalledOnWorkstation:!1,deskew:!0,autoRotate:!0,autoCrop:!1,holeFill:!1,despeckle:!1,discardBlankPages:!1,suppressBackgroundColor:!1,maxPages:-1,patchCodes:!1,importEDocs:!1,deliverables:{localFile:{format:"tif",jpegCompression:!1,quality:75,split:!1,chunkSize:0},originalImageFile:{format:"tif",jpegCompression:!1,quality:75},thumbnail:{format:"tif",jpegCompression:!1,quality:75,height:void 0,width:void 0}},barcodes:{count:0,checksums:!1,symbology:void 0},imageAddress:void 0,imprintersConfig:void 0,tiff:{jpegCompression:!1},jpeg:{quality:75},kofaxVRSEliteProfileName:null},_shutdown:!1,connectionBroken:!0,eventsUrl:"",settingsUrl:"",images:"",image:"",_sessionsKey:"sessions",initialize:function(t,n,i){var o=this;a.scope("WebTwain.initialize()",function(){o._shutdown=!1;o._server=s;o._server.setLimitedMode(u.msie&&u.version<10);var e={localization:t.localization,scanningOptions:o.extendScanningOptions(t.scanningOptions)};o.__retryConnection(e,function(e){o.SessionId=e.id;o.HostRunsAsService=e.hostRunsAsService;o.PersistentPath=e.persistentPath;o.self=e.self;o.eventsUrl=e.events;o.settingsUrl=e.settings;o.images=e.images;o.Scan=new d(e,o);o.LocalFile=new l(e);o.scanningOptions=o.extendScanningOptions(e.scanningOptions);o.ReadyState=e.readyState||1;o.TwainAvailable=e.twainAvailable;o.AppTitle=e.appTitle;o.Localization=e.localization;o.FullVersion=JSON.parse("["+e.fullVersion.split(".").join(",")+"]");o.machineName=e.machineName;o.connectionBroken=!1;o.closeAbandonedSessions(function(){n&&n.call&&n.call(o)})},i)})},extendScanningOptions:function(e){var t={};"string"==typeof(e=e||{}).scanner?t.scanner=e.scanner:t.scanner=this.SourceDevice;void 0!==e.brightness&&(t.brightness=Number(e.brightness));void 0!==e.contrast&&(t.contrast=Number(e.contrast));void 0!==e.threshold&&(t.threshold=Number(e.threshold));t.showScannerUI=e.showScannerUI||!1;t.showScannerUIWithCurrentSettings=e.showScannerUIWithCurrentSettings||!1;t.showProgress=e.showProgress||!1;t.pixelType=void 0!==e.pixelType?Number(e.pixelType):-1;t.resultPixelType=void 0!==e.resultPixelType?Number(e.resultPixelType):-1;t.duplex=void 0!==e.duplex?Number(e.duplex):0;t.dpi=Number(e.dpi)||200;t.feeder=void 0!==e.feeder?Number(e.feeder):-1;t.paperSize=void 0!==e.paperSize?Number(e.paperSize):3;t.orientation=void 0!==e.orientation?Number(e.orientation):-1;t.applyVRS=void 0===e.applyVRS||e.applyVRS;t.scanCompression=void 0!==e.scanCompression?e.scanCompression:i.ScanCompression.Auto;t.disableVRSIfInstalledOnWorkstation=e.disableVRSIfInstalledOnWorkstation||!1;t.deskew=void 0!==e.deskew?e.deskew:t.applyVRS;t.autoRotate=void 0!==e.autoRotate?e.autoRotate:t.applyVRS;t.autoCrop=e.autoCrop||!1;t.holeFill=e.holeFill||!1;t.despeckle=e.despeckle||!1;t.discardBlankPages=e.discardBlankPages||!1;t.suppressBackgroundColor=e.suppressBackgroundColor||!1;t.maxPages=Number(e.maxPages)||-1;t.patchCodes=e.patchCodes||!1;t.importEDocs=e.importEDocs||!1;t.feeder===i.FeederType.Flatbed&&t.duplex===i.ScanMode.Duplex&&(t.duplex=i.ScanMode.Simplex);if("object"==typeof e.barcodes){t.barcodes=e.barcodes;t.barcodes.hasOwnProperty("count")||(t.barcodes.count=-1)}else t.barcodes={count:0};t.tiff=t.tiff||{jpegCompression:!0};e.tiff&&void 0!==e.tiff.jpegCompression&&(t.tiff.jpegCompression=e.tiff.jpegCompression);t.jpeg=t.jpeg||{};t.jpeg.quality=Number(e.jpeg&&e.jpeg.quality||75);t.evrsSettings="string"==typeof e.evrsSettings?e.evrsSettings:"";t.deliverables="object"==typeof e.deliverables?e.deliverables:{};"object"==typeof e.imageAddress?t.imageAddress=e.imageAddress:delete t.imageAddress;"object"==typeof e.imprintersConfig?t.imprintersConfig=e.imprintersConfig:delete t.imprintersConfig;this.scanningOptions&&(this.scanningOptions=t);return t},closeAbandonedSessions:function(e){var t=this,n={future:null},i=function(e,t){return function(){n.future=e.shutdownWorker(t)}};if(t._server.isLimitedMode()&&window.localStorage){var o=window.localStorage.getItem(t._sessionsKey);if(o){o=JSON.parse(o);for(var r=0;r<o.length;++r){var a=o[r];a&&(n.future?n.future.always(i(t,a)):n.future=t.shutdownWorker(a))}}}n.future?n.future.always(function(){window.localStorage.removeItem(t._sessionsKey);e()}):e()},reloadScanners:function(e,t){var n=this;this._server.get(this.self,{},e).done(function(e){n.InstalledSources=e.installedSources||[];n.DefaultSourceDevice=e.defaultSourceDevice;n.SourceDevice=e.sourceDevice;t&&t()})},shutdown:function(t,i,n){var o=this,r=o._sessionsKey;a.scope("WebTwain.shutdown()",function(){if(o.self){o.shutdownWorker(o.self,n).done(function(){o._shutdown=!0;o.self=void 0;o.settingsUrl=void 0;o.eventsUrl=void 0;o.images=void 0;o.SessionId=null;o.Scan.uninitialize();o.onacquiredone=function(){};o.onacquirefailed=function(e,t){};o.onimageacquired=function(e,t){};o.onimagediscarded=function(){};o.onscanerror=function(e,t){};o._server.releaseDeffered();t&&t()}).fail(function(e,t,n){a.warn("WebTwain.shutdown() error "+t+"; "+n);i&&i(f.internalError,{})});if(o._server.isLimitedMode()&&window.localStorage){var e=window.localStorage.getItem(r)||"[]";(e=JSON.parse(e)).push(o.self);window.localStorage.setItem(r,JSON.stringify(e))}}else{o._shutdown=!0;t&&t()}})},shutdownWorker:function(e,t){var n=this,i=null;a.scope("WebTwain.shutdownWorker: "+e,function(){i=t?n._server.beacon(e,""):n._server.del(e,{},!1)});return i},updateSettings:function(e,t){return this._server.put(this.self,e,t)},AsBase64String:function(e,t,n){var i=this,o="";a.scope("WebTwain.Clear()",function(){i._server&&i.images&&i._server.get(i.images,{format:e||t.format,jpegCompression:t?t.jpegCompression:void 0,quality:t?t.quality:void 0},"function"==typeof n).done(function(e){o=e.base64||"";n&&"function"==typeof n&&n(o)}).fail(function(e,t,n){a.log("WebTwain.AsBase64String() error "+t+"; "+n)})});return o},Clear:function(){var e=this;a.scope("WebTwain.Clear()",function(){e._server&&e.images&&e._server.del(e.images)})},DeleteImage:function(e){a.scope("WebTwain.DeleteImage()",function(){e&&e.clear&&e.clear()})},onacquiredone:function(){},onacquirefailed:function(e,t){},onimageacquired:function(e,t){},onimagediscarded:function(){},onscanerror:function(e,t){},startEventsPoll:function(e){var n=0,i=1,o=2,r=3,a=4,s=5,l=6,c=7,d=8,u=this,p=0;this._server.poll(this.eventsUrl,function(e){u.connectionBroken=!1;p=0;switch(e.eventType){case n:u.onacquiredone();break;case i:u.onacquirefailed(e.message,e.details);break;case o:var t=new h(e.image.sessionId,e.image.index,e.image);u.onimageacquired(e.index,t);break;case r:u.onscanerror(e.message,e.details);break;case a:u._server.executeDeferredCallback(e.callbackId,e.values);break;case s:u._server.executeDeferredCallback(e.callbackId,e.complete);break;case l:return!1;case c:u._server.executeDeferredCallback(e.callbackId,e.values);break;case d:u.onimagediscarded()}return!u._shutdown},function(e){if(e){if(404===e.status){u.reportBrokenConnection(f.brokenConnection);return!1}if((500===e.status||0===e.status)&&!u._shutdown&&15<++p){u.reportBrokenConnection();p=0;return!1}}return!u._shutdown})},reportBrokenConnection:function(e){if(!this.connectionBroken){this.connectionBroken=!0;e?m.__reportError(e):m.__reportError(f.noPlugin,{message:f.webServiceMissed,filename:m._installerFileName})}},__serviceUrlBase:"https:"===window.location.protocol?"https://127.0.0.1:23024":"http://127.0.0.1:23023",__retryConnection:function(t,n,i){var o=this;o._shutdown||this._server.post(this.__serviceUrlBase+"/sessions",t,!0).done(function(e){n.call(o,e)}).fail(function(e){i&&i(e);window.setTimeout(function(){o.__retryConnection(t,n)},2e3)})}},m={scanners:[],defaultScanner:"",isSupportedBrowser:!0,_logger:a,_installerFileName:"Mac"!==navigator.platform.substring(0,3)?"Kofax.WebCapture.Installer.msi":"Kofax.WebCapture.macOS.pkg",_eztwain:{},_params:{},_lastSheetNo:-1,_aborting:!1,_localization:{not32Bit:"Browser is not 32-bit: ",notWindows:"Platform is not Windows : ",ieVersion:"IE version not supported: ",notSupported:"Not currently supported or macOS: ",pluginVersion:"Plugin is version: ",minVersionNeeded:"minimum version needed: "},__reportError:function(e,t){f.report(this._params.onScanError,e,t)},getVersion:function(){return this._eztwain.FullVersion},getInstallerFileName:function(){return this._installerFileName},getScanStationName:function(){return this._eztwain.machineName},deleteLocalFile:function(e,t){var n=this._eztwain.LocalFile;if("function"==typeof t)n.removeAsync(e,t);else{a.warn("Parameter 'callback' is not specified. The method 'deleteLocalFile' will be run synchronously.");n.remove(e)}},encryptedLocalFileAsBase64String:function(){var e=Array.prototype.slice.call(arguments),t=e.slice(-1).pop(),n=this._eztwain.LocalFile;if("function"!=typeof t){a.warn("Parameter 'callback' is not specified. The method 'encryptedLocalFileAsBase64String' will be run synchronously.");return n.asBase64String.apply(n,arguments)}e.unshift(e.pop());n.asBase64StringAsync.apply(n,e)},splitToFiles:function(){var e=Array.prototype.slice.call(arguments),t=this._eztwain.LocalFile;e.unshift(e.pop());t.splitToFiles.apply(t,e)},globalPurgeByAge:function(e,t){var n=this._eztwain.LocalFile;if("function"==typeof t)n.globalPurgeByAgeAsync(e,t);else{a.warn("Parameter 'callback' is not specified. The method 'globalPurgeByAge' will be run synchronously.");n.globalPurgeByAge(e)}},listLocalFiles:function(e){var t=this._eztwain.LocalFile;if("function"!=typeof e){a.warn("Parameter 'callback' is not specified. The method 'listLocalFiles' will be run synchronously.");return t.list()}t.listAsync(e)},removeAll:function(e){var t=this._eztwain.LocalFile;if("function"==typeof e)t.removeAllAsync(e);else{a.warn("Parameter 'callback' is not specified. The method 'removeAll' will be run synchronously.");t.removeAll()}},saveBase64ToEncryptedLocalFile:function(e,t){var n=this._eztwain.LocalFile;if("function"!=typeof t){a.warn("Parameter 'callback' is not specified. The method 'saveBase64ToEncryptedLocalFile' will be run synchronously.");return n.fromBase64String(e)}n.fromBase64StringAsync(e,t)},setBarcodeLicense:function(e){var t={barcodeLicense:e},i=this;this._eztwain.updateSettings(t,!0).fail(function(e,t,n){i._logger.error("setBarcodeLicense() failed: "+t+"; "+n);i.__reportError(f.internalError)})},setLicense:function(e,i){var o=this;if(e&&(e.key||e.barcode)){var t={domain:window.location.hostname};e.key&&(t.wingScanLicense=e.key);e.barcode&&(t.barcodeLicense=e.barcode);this._eztwain.updateSettings(t,!0).done(function(){i&&i(!0)}).fail(function(e,t,n){o._logger.error("setLicense() failed: "+t+"; "+n);i?i(!1):o.__reportError(f.internalError,{})})}return!0},setSymmetricEncryptionKey:function(e){var t=Array.prototype.slice.call(arguments).slice(-1).pop(),n="function"==typeof t,i=this;i._eztwain.updateSettings({symmetricEncryptionKey:e},n).done(t).fail(function(e,t,n){i._logger.error("setSymmetricEncryptionKey() failed: "+t+"; "+n);i.__reportError(f.internalError,{})})},enumerateScanners:function(){var t=Array.prototype.slice.call(arguments).slice(-1).pop(),n="function"==typeof t,e=o.Deferred(),i=this;n||a.warn("Parameter 'callback' is not specified. The method 'enumerateScanners' will be run synchronously.");if(this._eztwain.TwainAvailable)this._eztwain.reloadScanners(n,function(){i.scanners=i._eztwain.InstalledSources||[];i.defaultScanner=i._eztwain.DefaultSourceDevice;e.resolve(i.scanners)});else{this.__reportError(f.noTwain);e.resolve()}e.done(function(e){n&&t(e)})},onScannerSelected:function(e){this._eztwain.SourceDevice=e},isInstalled:function(){return!0},__bindEvents:function(e){var t=this._params.eventBindObject,n=e?t.bind:t.unbind;this._params.onScanStarted&&n.call(t,"onScanStarted",e?{}:this._params.onScanStarted,this._params.onScanStarted);this._params.onScanCompleted&&n.call(t,"onScanCompleted",e?{}:this._params.onScanCompleted,this._params.onScanCompleted);this._params.onImageAcquired&&n.call(t,"onImageAcquired",e?{}:this._params.onImageAcquired,this._params.onImageAcquired);this._params.onImageDiscarded&&n.call(t,"onImageDiscarded",e?{}:this._params.onImageDiscarded,this._params.onImageDiscarded);this._params.onScanError&&n.call(t,"onScanError",e?{}:this._params.onScanError,this._params.onScanError)},versionLess:function(e,t){return e[0]!==t[0]?e[0]<t[0]:e[1]!==t[1]?e[1]<t[1]:e[2]!==t[2]?e[2]<t[2]:e[3]<t[3]},__pluginTooOld:function(e,t){return this.versionLess(e.FullVersion,t)},__initEztwainWhenReady:function(){var e=r;if(this._eztwain&&4==this._eztwain.ReadyState)if(null!=this._params.backwardCompatibilityMode&&this._params.backwardCompatibilityMode||!this.__pluginTooOld(this._eztwain,e)){this.__bindEvents(!0);var n=this;n._eztwain.onacquiredone=function(){n.__onAcquireDone()};n._eztwain.onacquirefailed=function(e,t){n.__onAcquireFailed(e,t)};n._eztwain.onimageacquired=function(e,t){n.__onImageAcquired(t)};n._eztwain.onimagediscarded=function(){n.__onImageDiscarded()};n._eztwain.onscanerror=function(e,t){n.__reportError(e,{message:t})};n._eztwain.startEventsPoll(n._eztwain.SessionId);n._logger.info("minVer:                 "+e).info("navigator.userAgent:    "+navigator.userAgent).info("navigator.vendor:       "+navigator.vendor).info("browser: "+u.name).info("version: "+u.version);n._params.onScanClientReady&&n._params.onScanClientReady()}else{var t=this._localization.pluginVersion+this._eztwain.FullVersion+" - "+this._localization.minVersionNeeded+e;this._eztwain.HostRunsAsService?this.__reportError(f.oldWindowsService,{message:t}):this.__reportError(f.oldPlugin,{message:t,filename:this._installerFileName})}else{var i=this;setTimeout(function(){i.__initEztwainWhenReady()},2e3)}},initialize:function(e){(this._params=e).localization&&o.extend(this._localization,e.localization);var t=this;this._eztwain=p;this._eztwain.initialize(e,function(){t.__initEztwainWhenReady()},function(e){e.responseText&&f[e.responseText]?t.__reportError(f[e.responseText]):t.__reportError(f.noPlugin,{message:f.webServiceMissed,filename:t._installerFileName})})},__shutdown:function(e,t,n){try{var i=this;this._eztwain&&this._eztwain.shutdown(function(){i.__bindEvents(!1);i.scanners=[];i._params={};i._eztwain=null;i._uploadFunction=null;e&&e()},t,n)}catch(e){t&&t(f.internalError,e)}},__onAcquireDone:function(){var t=this;this._logger.scope("onAcquireDone event",function(){t._logger.scope("calling user event handler...",function(){t._params.eventBindObject.trigger("onScanCompleted",{success:!0})});t._uploadFunction&&t._logger.scope("calling uploadFunction.",function(){t._eztwain.AsBase64String(".tif",{},function(e){e&&e.length&&t._uploadFunction(e)})})})},__onAcquireFailed:function(e,t){var n=this;this._logger.scope("onAcquireFailed event (%s, %s)",e,t,function(){n._logger.scope("calling user event handler...",function(){n._params.eventBindObject.trigger("onScanCompleted",{success:!1,error:{message:e,details:t}})})})},__onImageAcquired:function(t){var n=this;this._logger.scope("onImageAcquired event",function(){n._logger.info("image:").object(t);t.discard=!1;try{n._aborting?t.discard=!0:n._logger.scope("calling user event handler...",function(){n._params.eventBindObject.trigger("onImageAcquired",t)})}catch(e){n.__reportError(f.internalError,e);t.discard=!0}t.discard&&n._eztwain.DeleteImage(t)})},__onImageDiscarded:function(){var e=this;this._logger.scope("onImageDiscarded event",function(){e._logger.scope("calling user event handler...",function(){e._params.eventBindObject.trigger("onImageDiscarded")})})},scan:function(e,t){if(this._eztwain){this._aborting=!1;this._params.eventBindObject.trigger("onScanStarted",{});try{this._eztwain.Clear();this._lastSheetNo=-1;this._uploadFunction=t;var n=this._eztwain.extendScanningOptions(e);this._eztwain.Scan.start(n)||this._params.eventBindObject.trigger("onScanCompleted",{success:!1,error:{message:f.scanFail}})}catch(e){this.__reportError(f.internalError,e);this._params.eventBindObject.trigger("onScanCompleted",{success:!1,error:e})}}},abortScan:function(){if(this._eztwain){this._aborting=!0;this._eztwain.Scan&&this._eztwain.Scan.abort&&this._eztwain.Scan.abort()}},importFiles:function(e){if(this._eztwain){this._aborting=!1;this._params.eventBindObject.trigger("onScanStarted",{});try{this._eztwain.Clear();this._lastSheetNo=-1;this._uploadFunction=null;var t=this._eztwain.extendScanningOptions(e);this._eztwain.Scan.importFiles(t)||this._params.eventBindObject.trigger("onScanCompleted",{success:!1,error:{message:f.scanFail}})}catch(e){this.__reportError(f.internalError,e);this._params.eventBindObject.trigger("onScanCompleted",{success:!1,error:e})}}},showSettingsDialog:function(e,t){try{"string"!=typeof e.scanner&&(e.scanner=this._eztwain.SourceDevice);this._eztwain.Scan.showSettingsDialog(e,t)}catch(e){this.__reportError(f.internalError,e)}},getSessionId:function(){return this._eztwain.SessionId},getPersistentPath:function(){return this._eztwain.PersistentPath},getSupportedValues:function(e,t){try{if(this._eztwain.Scan.getSupportedValues){"string"!=typeof e.scanner&&(e.scanner=this._eztwain.SourceDevice);this._eztwain.Scan.getSupportedValues(e,t)}else t()}catch(e){this.__reportError(f.internalError,e)}},getCurrentValues:function(e,t){try{if(this._eztwain.Scan.getCurrentValues){"string"!=typeof e.scanner&&(e.scanner=this._eztwain.SourceDevice);this._eztwain.Scan.getCurrentValues(e,t)}else t()}catch(e){this.__reportError(f.internalError,e)}},clear:function(){this._eztwain.Clear()}};e.exports=m},function(e,t,n){"use strict";var i=n(1),o=(n(3),n(0)),r=n(6),a=n(15),s=function(e,t,n){r.apply(this,arguments);this.thumbnailData=new a(this.id,o.extend(!0,n.thumbnailData,{thumb:n.thumb}))};s.prototype=o.extend({thumbnail:function(e,t){this.thumbnailData&&this.thumbnailData.requestedWidth===e&&this.thumbnailData.requestedHeight===t||(this.thumbnailData=new a(this.id,{thumb:this.thumbUrl,width:e,height:t,requestedWidth:e,requestedHeight:t}));return this.thumbnailData},Thumbnail:function(){i.deprecate("Thumbnail","thumbnail");return this.thumbnail.apply(this,arguments)}},r.prototype);e.exports=s},function(e,t,n){var i=n(6).prototype,o=function(e){i.updateData.call(this,e);this.base64=e.base64;this.format=e.format;this.jpegCompression=e.jpegCompression;this.quality=e.quality;this.requestedWidth=e.requestedWidth;this.requestedHeight=e.requestedHeight},r=function(e,t){this.id=e;o.call(this,t=t||{});this.selfUrl=t.thumb;this.thumbUrl=null};r.prototype={updateData:function(e){o.call(this,e)},asBase64String:function(e,t){var n=Array.prototype.slice.call(arguments).slice(-1).pop();"function"!=typeof n&&(n=void 0);return this.base64&&this.format===e&&(!t||this.jpegCompression===t.jpegCompression&&this.quality==t.quality)?n?n(this.base64):this.base64:i.asBase64String.apply(this,arguments)},saveEncryptedLocal:function(){return i.saveEncryptedLocal.apply(this,arguments)},clear:function(){this.id=null;this.selfUrl=null;this.base64=null}};e.exports=r},function(e,t,n){"use strict";var a,i,o,s=n(1),l=n(3),c=n(0);function r(e){a=e.file;o=e.files;i=e.splitFile}function d(i){return function(e,t,n){i.reject();s.warn("Status: %s, Error: %s",t,n)}}function u(t,n,i,o){var r=c.Deferred();s.scope("LocalFile.asBase64String("+t+","+n+","+i+")",function(){if(a&&t){var e={format:n||(i?i.format:void 0),jpegCompression:i?i.jpegCompression:void 0,quality:i?i.quality:void 0};l.get(a+"/"+t,e,o).done(function(e){r.resolve(e)}).fail(d(r))}else r.reject()});return r}function p(e,t){var n=c.Deferred();s.scope("LocalFile.fromBase64String()",function(){s.debug("Base64 string: %s",e);o&&e?l.post(o,{base64:e},t).done(function(e){n.resolve(e.id)}).fail(d(n)):n.reject()});return n}function f(e){var t=c.Deferred();s.scope("LocalFile.list()",function(){o?l.get(o,{},e).done(function(e){t.resolve(e)}).fail(d(t)):t.reject()});return t}function h(e,t){var n=c.Deferred();s.scope("LocalFile.remove("+e+")",function(){a&&e?l.del(a+"/"+e,{},t).done(function(){n.resolve(!0)}).fail(d(n)):n.reject()});return n}function m(e){var t=c.Deferred();s.scope("LocalFile.removeAll()",function(){o?l.del(o,{},e).done(function(){t.resolve(!0)}).fail(d(t)):t.reject()});return t}function g(e,t){var n=c.Deferred();s.scope("LocalFile.globalPurgeByAge("+e+")",function(){o?l.del(o+"?age="+e,{},t).done(function(){n.resolve(!0)}).fail(d(n)):n.reject()});return n}function _(e,t){var n=void 0===t?void 0:t;e.done(function(e){n=e});return n}function v(e,t,n){e.done(function(e){t(e)}).fail(function(){t(n)})}var y={asBase64String:function(e,t,n){return _(u(e,t,n,!1),"")},fromBase64String:function(e){return _(p(e,!1))},list:function(){return _(f(!1))},remove:function(e){return _(h(e,!1),!1)},removeAll:function(){return _(m(!1),!1)},globalPurgeByAge:function(e){return _(g(e,!1),!1)}},b={asBase64StringAsync:function(e,t,n,i){v(u(t,n,i,!0),e,"")},fromBase64StringAsync:function(e,t){v(p(e,!0),t)},listAsync:function(e){v(f(!0),e)},removeAsync:function(e,t){v(h(e,!0),t,!1)},removeAllAsync:function(e){v(m(!0),e,!1)},globalPurgeByAgeAsync:function(e,t){v(g(e,!0),t,!1)},splitToFiles:function(e,t,n){v(function(e,t){var n=c.Deferred();s.scope("LocalFile.splitToChunkFiles("+e+")",function(){if(i&&e){t=t||{};l.post(i+"/"+e,t,!0).done(function(e){n.resolve(e)}).fail(d(n))}else n.reject()});return n}(t,n),e)}};r.prototype=c.extend({},y,b);e.exports=r},function(e,t,n){"use strict";var i,o,r,a,s,l=n(1),c=n(3),d=function(e,t){i=e.scan;o=e.importFiles;r=e.settingsDialog;a=e.supportedValues;s=e.currentValues;this.scanClient=t};d.prototype={uninitialize:function(){s=a=r=o=i=void 0},start:function(e){l.scope("Scan.start()",function(){c.post(i,e,!0).fail(function(e,t,n){l.error("Scan.start() error "+t+"; "+n);this.scanClient&&this.scanClient.reportBrokenConnection()})});return!0},abort:function(){l.scope("Scan.abort()",function(){c.del(i,{},!1).fail(function(e,t,n){l.error("Scan.abort() error "+t+"; "+n)})});return!0},importFiles:function(e){l.scope("Scan.importFiles()",function(){c.post(o,e,!0).fail(function(e,t,n){l.error("Scan.importFiles() error "+t+"; "+n);this.scanClient&&this.scanClient.reportBrokenConnection()})});return!0},showSettingsDialog:function(e,i){l.scope("Scan.showSettingsDialog()",function(){c.callDeferred(c.post,r,e,i).fail(function(e,t,n){l.error("Scan.showSettingsDialog() error "+t+"; "+n);i({complete:!1});this.scanClient&&this.scanClient.reportBrokenConnection()})});return!0},getSupportedValues:function(e,i){l.scope("Scan.getSupportedValues()",function(){c.callDeferred(c.post,a,e,i).fail(function(e,t,n){l.error("Scan.getSupportedValues() error "+t+"; "+n);i({});this.scanClient&&this.scanClient.reportBrokenConnection()})});return!0},getCurrentValues:function(e,i){l.scope("Scan.getCurrentValues()",function(){c.callDeferred(c.post,s,e,i).fail(function(e,t,n){l.error("Scan.getCurrentValues() error "+t+"; "+n);i({});this.scanClient&&this.scanClient.reportBrokenConnection()})});return!0}};e.exports=d},function(e,t,n){var l=n(0);e.exports=function(){if(window.XDomainRequest){var e={NextId:0};l.ajaxTransport(function(n){if(n.crossDomain&&n.async){if(n.timeout){n.xdrTimeout=n.timeout;delete n.timeout}var r,a,s=e;return{send:function(e,o){function t(e,t,n,i){r.onload=r.onerror=r.ontimeout=l.noop;r=void 0;delete s[a];o(e,t,n,i)}r=new XDomainRequest;a=(++s.NextId).toString();(s[a]=r).open(n.type,n.url);r.timeout=n.xdrTimeout||Number.MAX_VALUE;r.onprogress=function(){};r.onload=function(){t(200,"OK",{text:r.responseText},"Content-Type: "+r.contentType)};r.onerror=function(){t(500,"Not Found")};r.ontimeout=function(){t(0,"timeout")};setTimeout(function(){r.send(n.hasContent&&n.data||null)},0)},abort:function(){if(r){delete s[a];r.onerror=l.noop;r.abort()}}}}})}}()},function(e,t,n){"use strict";var d=n(0),l=n(2);e.exports={__resetFields:function(){this._params={};this.contentType="";this.contentTypeDescriptionName="";this.contentTypeDescription={};this.contentTypeDescriptionArray=[];this.documentFilename="";this.currentImportId="";this.currentStatus="";this.loosePages=!1;this.loosePageDisplayName="";this.indexFieldsForDocumentClass={};this.indexFieldsForDocumentClassArray=[];this.indexFieldValuesForDisplay={};this.batchFieldValuesForDisplayList={};this.batchFieldArray=[];this.fieldValuesForImport={};this.customValidationCollection={}},__getContentTypeDocs:function(i){var o=this;this.getContentTypeDescription(i,function(e){var t=d(".atala-content-type-document-list")[0];if(t){for(;0<t.length;)t.remove(0);if(void 0!==o._params.removedContentTypeDescriptions){var n=o.__filterContentTypeDescriptionList(e,o._params.removedContentTypeDescriptions);o.__buildContentTypeDescriptionDropDown(o,i,n,t)}else o.__buildContentTypeDescriptionDropDown(o,i,e,t);void 0!==o._params.onContentTypeDescriptionsCreated&&o._params.onContentTypeDescriptionsCreated()}},function(e,t){o._params.onError(e,{statusText:t.xhr.statusText})})},__filterContentTypeDescriptionList:function(e,t){for(var n=[],i=t.split(","),o=0;o<i.length;o++)i[o]=i[o].trim();for(var r=0;r<e.length;r++)-1===this.__inArray(e[r].documentClass,i)&&n.push(e[r]);return n},__buildContentTypeDescriptionDropDown:function(e,t,n,i){e.contentTypeDescriptionArray=n;e.contentTypeDescription=n[0];for(var o in n){var r=new Option(n[o].documentClass);i.add(r)}if(!0===e.loosePages)if(void 0!==e._params.displayedLoosePagesForContentType){for(var a=e._params.displayedLoosePagesForContentType.split(","),s=0;s<a.length;s++)a[s]=a[s].trim();-1!==this.__inArray(t,a)&&e.__addLoosePageOption(i,e.loosePageDisplayName)}else e.__addLoosePageOption(i,e.loosePageDisplayName);(0<d(".atala-indexfield-list").length||0<d(".atala-batchfield-list").length)&&e.__getIndexAndBatchFields(e.contentType,e.contentTypeDescription)},__addLoosePageOption:function(e,t){var n;n=void 0===t?new Option(""):new Option(t);e.add(n)},__getContentTypeDocsWithNoUI:function(e,t){var n=this;n.contentTypeDescriptionName=t;this.getContentTypeDescription(e,function(e){n.contentTypeDescriptionArray=e;for(var t in e)e[t].documentClass===n.contentTypeDescriptionName&&(n.contentTypeDescription=e[t])},function(e,t){n._params.onError(e,{statusText:t.xhr.statusText})})},__getIndexAndBatchFields:function(e,t){var n,i=this,o="";if(void 0!==t){var r=t.documentClass;o=-1!==this.__inArray(" / ",r)?r.split(" / ")[0]:r}if(""===this._params.displayedIndexFields||void 0===this._params.displayedIndexFields)i.indexFieldsForDocumentClass="";else{var a=this._params.displayedIndexFields.split(",");for(n=0;n<a.length;n++)a[n]=a[n].trim();i.indexFieldsForDocumentClass=a}if(void 0!==t){0<d(".atala-batchfield-list").length&&i.__buildBatchFieldTable(i._params.displayedBatchFields,e,!0);this.getIndexFieldsForDocumentClass(e,o,function(e){if(0<d(".atala-indexfield-list").length){0===d("#atala-indexfield-table tr").length&&void 0===d("#atala-indexfield-table")||d("#atala-indexfield-table").remove();d("<table id=atala-indexfield-table></table>").appendTo(".atala-indexfield-list");i.indexFieldsForDocumentClassArray=e;""===i.indexFieldsForDocumentClass||void 0===i.indexFieldsForDocumentClass?i.__drawIndexFieldTable(e,!0):i.__drawIndexFieldTable(e,!1);void 0!==i._params.onIndexFieldsCompleted&&i._params.onIndexFieldsCompleted(!0)}},function(e){i._params.onError(e,{statusText:e.xhr.statusText})})}else i.__buildBatchFieldTable(i._params.displayedBatchFields,e,!1)},__drawIndexFieldTable:function(e,t){for(var n=0;n<e.length;n++){var i="",o=e[n].indexField.split(" / "),r=o[1].split(" ^ ");"true"===r[1]&&(i=' class="atala-indexfield-required"');"true"===r[2]&&(i=' class="atala-field-hidden"');if(t||-1!==this.__inArray(o[0],this.indexFieldsForDocumentClass)){var a=this.__replaceWhiteSpace(o[0])+"_indexFieldInputId";d("<tr><td><label"+i+" for='"+a+"'>"+o[0]+"</label></td><td><input type='text' "+i+" id='"+a+"' /></td></tr>").appendTo("#atala-indexfield-table")}void 0!==this._params.onIndexFieldCompleted&&this._params.onIndexFieldCompleted(o[0])}},__buildBatchFieldTable:function(e,t,n){var i=this;if(""===e||void 0===e)i.batchFieldValuesForDisplayList="";else{for(var o=this._params.displayedBatchFields.split(","),r=0;r<o.length;r++)o[r]=o[r].trim();i.batchFieldValuesForDisplayList=o}n?i.getBatchFields(t,function(e){0===d("#atala-batchfield-table tr").length&&void 0===d("#atala-batchfield-table")||d("#atala-batchfield-table").remove();i.batchFieldArray=e;d("<table id=atala-batchfield-table></table>").appendTo(".atala-batchfield-list");void 0===i._params.displayedBatchFields||""===i._params.displayedBatchFields?i.__drawBatchFieldRow(e,!0):i.__drawBatchFieldRow(e,!1);void 0!==i._params.onBatchFieldsCompleted&&i._params.onBatchFieldsCompleted(!0)},function(e){i._params.onError(e,{statusText:e.xhr.statusText})}):i.getBatchFields(t,function(e){i.batchFieldArray=e;0<d(".atala-batchfield-list").length&&(0===d("#atala-indexfield-table tr").length&&void 0===d("#atala-indexfield-table")||d("#atala-indexfield-table").remove());if(0<d(".atala-indexfield-list").length&&0===d(".atala-batchfield-list").length){0===d("#atala-indexfield-table tr").length&&void 0===d("#atala-indexfield-table")||d("#atala-indexfield-table").remove();d("<table id=atala-indexfield-table></table>").appendTo(".atala-indexfield-list");""===i.batchFieldValuesForDisplayList||void 0===i.batchFieldValuesForDisplayList?i.__drawBatchFieldRow(e,!0):i.__drawBatchFieldRow(e,!1)}void 0!==i._params.onBatchFieldsCompleted&&i._params.onBatchFieldsCompleted(!0)},function(e){i._params.onError(e,{statusTest:e.xhr.statusText})})},__drawBatchFieldRow:function(e,t){for(var n=0;n<e.length;n++){var i="",o=e[n].batchField.split(" / "),r=o[1].split(" ^ ");"true"===r[1]&&(i=' class="atala-indexfield-required"');"true"===r[2]&&(i=' class="atala-field-hidden"');if(t||-1!==this.__inArray(o[0],this.batchFieldValuesForDisplayList)){var a=this.__replaceWhiteSpace(o[0])+"_batchFieldInputId",s="<tr><td><label"+i+" for='"+a+"'>"+o[0]+"</label></td><td><input type='text' "+i+" id='"+a+"'/></td></tr>";0<d(".atala-batchfield-list").length?d(s).appendTo("#atala-batchfield-table"):d(s).appendTo("#atala-indexfield-table");void 0!==this._params.onBatchFieldCompleted&&this._params.onBatchFieldCompleted(o[0])}}},__replaceWhiteSpace:function(e){return e.replace(/\s/g,"_")},__inArray:function(e,t,n){var i,o=Array.prototype.indexOf;if(t){if(o)return o.call(t,e,n);i=t.length;n=n?n<0?Math.max(0,i+n):n:0;for(;n<i;n++)if(t[n]===e)return n}return-1},__setCurrentImportId:function(e){this.currentImportId=e},__scrapeFieldValues:function(e,t,n){var i,o,r,a,s,l=[];if(void 0===e)return l;for(var c=0;c<e.length;c++){o=(i=t?e[c].batchField.split(" / "):e[c].indexField.split(" / "))[0];r=t?d("#"+n.__replaceWhiteSpace(o)+"_batchFieldInputId").val():d("#"+n.__replaceWhiteSpace(o)+"_indexFieldInputId").val();a=i[1].split(" ^ ");(s=void 0!==r&&""!==r)||(r="");if(t){o="batchField_"+o;n.fieldValuesForImport[o]=encodeURIComponent(r)}else{o="indexField_"+o;n.fieldValuesForImport[o]=encodeURIComponent(r)}"true"!==a[1]||s?l.push(!1):l.push(!0);n.customValidationCollection[o]={};n.customValidationCollection[o].name=o;n.customValidationCollection[o].value=r;n.customValidationCollection[o].fieldType=a[0];n.customValidationCollection[o].required=a[1]}t?void 0!==n._params.onBatchFieldTypeValidationStatus&&n._params.onBatchFieldTypeValidationStatus(n.customValidationCollection):void 0!==n._params.onIndexFieldTypeValidationStatus&&n._params.onIndexFieldTypeValidationStatus(n.customValidationCollection);return l},__getFieldListValuesForImport:function(e,t){var n=[];void 0!==e&&0<e.length&&n.push(this.__scrapeFieldValues(e,!1,this));void 0!==t&&0<t.length&&n.push(this.__scrapeFieldValues(t,!0,this));return n},__checkIndexFieldValidationResults:function(e){for(var t,n=0;n<e.length;n++)for(t=0;t<e[n].length;t++)if(!0===e[n][t])return!1;return!0},__setIndexFieldsWithNoUi:function(e){var t=e.split(",");if(1===t.length)t[0]=t[0].trim();else for(var n=0;n<t.length;n++)t[n]=t[n].trim();for(var i=0;i<t.length;i++){var o=t[i].split(":");this.fieldValuesForImport["indexField_"+o[0]]=encodeURIComponent(o[1])}},__setBatchFieldsWithNoUi:function(e){var t,n=e.split(",");for(t=0;t<n.length;t++)n[t]=n[t].trim();for(t=0;t<n.length;t++){var i=n[t].split(":");this.fieldValuesForImport["batchField_"+i[0]]=encodeURIComponent(i[1])}},__setLoosePages:function(e){var t=e.split(",");"true"===t[0]&&(this.loosePages=!0);2===t.length&&(this.loosePageDisplayName=t[1].trim())},__buildContentTypeList:function(e,t,n){for(var i in t){var o=new Option(t[i]);e.add(o)}void 0!==n._params.onContentTypesCreated&&n._params.onContentTypesCreated()},__filterContentTypes:function(e,t,n){var i,o=[],r=[];void 0!==n&&o.push(n);if(void 0!==t){r=t.split(",");for(var a=0;a<r.length;a++)r[a]=r[a].trim();for(i=0;i<e.length;i++)-1===this.__inArray(e[i],r)&&o.push(e[i])}else for(i=0;i<e.length;i++)e[i]!==n&&o.push(e[i]);return o},__beforeImporting:function(e){var t=!0;void 0!==e._params.onBeforeImport&&(t=e._params.onBeforeImport());return t},isInitialized:function(){return this._params&&this._params.handlerUrl},initialize:function(e){this.__resetFields();this._params=e;var i=this,o=[];if(void 0!==d(".atala-content-type-list")[0])this.getContentTypeList(function(e){void 0!==i._params.loosePages&&i.__setLoosePages(i._params.loosePages);var t=d(".atala-content-type-list")[0];if(void 0!==i._params.removedContentTypes||void 0!==i._params.defaultContentType){var n=i.__filterContentTypes(e,i._params.removedContentTypes,i._params.defaultContentType);i.__buildContentTypeList(t,n,i);i.contentType=n[0]}else{i.__buildContentTypeList(t,e,i);i.contentType=e[0]}i.__getContentTypeDocs(i.contentType);d(".atala-content-type-list").change(function(){i.contentType=d(".atala-content-type-list option:selected").text();i.__getContentTypeDocs(i.contentType)});d(".atala-content-type-document-list").change(function(){i.contentTypeDescription=i.contentTypeDescriptionArray[d(".atala-content-type-document-list")[0].selectedIndex];void 0!==d(".atala-indexfield-list")&&i.__getIndexAndBatchFields(i.contentType,i.contentTypeDescription)});d(".atala-import-button").click(function(){i.importDocument(i.documentFilename,i.contentType,i.contentTypeDescription,i._params.onImportCompleted,i._params.onError)});d(".atala-import-index-field-button").click(function(){if(void 0!==i.contentTypeDescription){o=i.__getFieldListValuesForImport(i.indexFieldsForDocumentClassArray,i.batchFieldArray);!0===i.__checkIndexFieldValidationResults(o)?i.importIndexFieldDocument(i.documentFilename,i.contentType,i.contentTypeDescription,i.fieldValuesForImport,i._params.onImportCompleted,i._params.onError):i._params.onError(l.fieldValidationError,i.customValidationCollection)}else{o=i.__getFieldListValuesForImport(void 0,i.batchFieldArray);!0===i.__checkIndexFieldValidationResults(o)?i.importLoosePageDocument(i.documentFilename,i.contentType,i.fieldValuesForImport,i._params.onImportCompleted,i._params.onError):i._params.onError(l.indexFieldValidationError,i.customValidationCollection)}});d(".atala-track-import-button").click(function(){i.trackImportStatus(i.currentImportId,i._params.onTrackStatusReceived)})},function(e,t){i._params.onError(e,{statusText:t.xhr.statusText+(-1!=t.xhr.responseText.indexOf("LicenseException")?" - Licensing":"")})});else{void 0!==d(".atala-content-type-list")[0]&&d(".atala-content-type-list").change(function(){i.contentType=d(".atala-content-type-list option:selected").text();i.__getContentTypeDocs(i.contentType)});void 0!==d(".atala-content-type-document-list")[0]&&d(".atala-content-type-document-list").change(function(){i.contentTypeDescription=i.contentTypeDescriptionArray[i.contentType];i.__getIndexAndBatchFields(i.contentType,i.contentTypeDescription)});void 0!==i._params.contentType&&void 0!==i._params.contentTypeDescriptionName&&i.__getContentTypeDocsWithNoUI(i._params.contentType,i._params.contentTypeDescriptionName);void 0!==i._params.contentType&&i.__getContentTypeDocs(i._params.contentType);var t=[];if(void 0!==d(".atala-indexfield-list")[0]&&void 0!==i._params.contentType)if(void 0!==i._params.contentTypeDescriptionName){t.documentClass=i._params.contentTypeDescriptionName;i.__getIndexAndBatchFields(i._params.contentType,t)}else i.__getIndexAndBatchFields(i._params.contentType,void 0);else{if(void 0!==i._params.contentTypeDescriptionName){t.documentClass=i._params.contentTypeDescriptionName;void 0!==i._params.indexFields&&i.__setIndexFieldsWithNoUi(i._params.indexFields)}void 0!==i._params.batchFields&&i.__setBatchFieldsWithNoUi(i._params.batchFields)}d(".atala-import-button").click(function(){i.importDocument(i.documentFilename,i._params.contentType,i.contentTypeDescription,i._params.onImportCompleted,i._params.onError)});d(".atala-import-index-field-button").click(function(){var e=!1;if(void 0===d(".atala-indexfield-list")[0])void 0!==i._params.indexFields?i.__setIndexFieldsWithNoUi(i._params.indexFields):void 0!==i._params.batchFields&&i.__setBatchFieldsWithNoUi(i._params.batchFields);else if(void 0!==i._params.contentTypeDescriptionName){o=i.__getFieldListValuesForImport(i.indexFieldsForDocumentClassArray);e=!0}else o=i.__getFieldListValuesForImport(void 0,i.batchFieldArray);if(!0===(void 0===d(".atala-indexfield-list")[0]||i.__checkIndexFieldValidationResults(o)))if(void 0!==i._params.contentTypeDescriptionName){var t=[];t.documentClass=i._params.contentTypeDescriptionName;i.importIndexFieldDocument(i.documentFilename,i._params.contentType,t,i.fieldValuesForImport,i._params.onImportCompleted,i._params.onError)}else i.importLoosePageDocument(i.documentFilename,i._params.contentType,i.fieldValuesForImport,i._params.onImportCompleted,i._params.onError);else!0===e?i._params.onIndexFieldImportValidationError(l.indexFieldValidationError,0<o.length?o[0]:[]):i._params.onBatchFieldImportValidationError(l.batchFieldValidationError,1<o.length?o[1]:0<o.length?o[0]:[])});d(".atala-track-import-button, .atala-import-button").click(function(){i.trackImportStatus(i.currentImportId,i._params.onTrackStatusReceived)})}},dispose:function(){d(".atala-content-type-list, .atala-content-type-document-list").each(function(e,t){d(t).empty().off("change")});d(".atala-import-index-field-button, .atala-track-import-button").each(function(e,t){d(t).off("click")});d(".atala-batchfield-list, .atala-indexfield-list").each(function(e,t){d(t).empty()});this.__resetFields()},setBatchFieldValues:function(e){0<e.length&&void 0!==e&&this.__setBatchFieldsWithNoUi(e)},setIndexFieldValues:function(e){0<e.length&&void 0!==e&&this.__setIndexFieldsWithNoUi(e)},importDocument:function(e,t,n,i,o){var r,a=this,s="";void 0!==n&&(s=n.documentClass);if(a.__beforeImporting(a)){r={url:this._params.handlerUrl+"?cmd=importDocument",type:"POST",data:{filename:e,contentType:t,contentTypeDocumentClass:s,contentTypeDescription:JSON.stringify(n)},dataType:"json",success:function(e,t){if("true"===e.success){i(e,e.id,e.status,t);a.__setCurrentImportId(e.id)}else o(l.importError,{message:e.errorMessage,xhr:t})},error:function(e,t){o(l.importError,{message:t,xhr:e})}};d.ajax(r)}},importIndexFieldDocument:function(e,t,n,i,o,r){var a=this;if(a.__beforeImporting(a)){var s={url:this._params.handlerUrl+"?cmd=importDocumentWithIndexFields",type:"POST",data:{filename:e,contentType:t,contentTypeDocumentClass:n.documentClass,contentTypeDescription:JSON.stringify(n),indexFields:JSON.stringify(i)},dataType:"json",success:function(e,t,n){if("true"===e.success){o(e,e.id,e.status,n);a.__setCurrentImportId(e.id)}else r(l.importError,{message:e.errorMessage,xhr:n})},error:function(e,t){r(l.importError,{message:t,xhr:e})}};d.ajax(s)}},importLoosePageDocument:function(e,t,n,i,o){var r=this;if(r.__beforeImporting(r)){var a={url:this._params.handlerUrl+"?cmd=importDocumentWithIndexFields",type:"POST",data:{filename:e,contentType:t,indexFields:JSON.stringify(n)},dataType:"json",success:function(e,t){if("true"===e.success){i(e,e.id,e.status,t);r.__setCurrentImportId(e.id)}else o(e.errorMessage,t)},error:function(e){o(l.importError,{xhr:e})}};d.ajax(a)}},trackImportStatus:function(e,t){d.get(this._params.handlerUrl+"?cmd=trackImportStatus&importId="+encodeURIComponent(e),{},function(e){t(e.status)})},getContentTypeList:function(t,n){d.getJSON(this._params.handlerUrl+"?cmd=getContentTypeList",{},function(e){t(e)}).fail(function(e){n(l.contentTypesError,{xhr:e})})},getContentTypeDescription:function(e,t,n){d.getJSON(this._params.handlerUrl+"?cmd=getContentTypeDescription&contentType="+e,{},function(e){t(e)}).fail(function(e){n(l.contentDescError,{xhr:e})})},getIndexFieldsForDocumentClass:function(e,t,n,i){d.getJSON(this._params.handlerUrl+"?cmd=indexFieldsForDocumentClass&contentType="+e+"&documentClass="+t,{},function(e){n(e)}).fail(function(e){i(l.docClassIndexFieldError,{xhr:e})})},getBatchFields:function(e,t,n){d.getJSON(this._params.handlerUrl+"?cmd=getBatchFields&contentType="+e,{},function(e){t(e)}).fail(function(e){n(l.batchFieldsError,{xhr:e})})}}}]);